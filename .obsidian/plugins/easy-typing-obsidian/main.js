/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// main.ts
__export(exports, {
  default: () => EasyTypingPlugin
});
var import_obsidian2 = __toModule(require("obsidian"));

// core.ts
var import_obsidian = __toModule(require("obsidian"));
var InlineType;
(function(InlineType3) {
  InlineType3["text"] = "text";
  InlineType3["code"] = "code";
  InlineType3["formula"] = "formula";
  InlineType3["link"] = "link";
  InlineType3["user"] = "user-defined";
  InlineType3["none"] = "none";
})(InlineType || (InlineType = {}));
var LineType;
(function(LineType2) {
  LineType2["text"] = "text";
  LineType2["code"] = "code";
  LineType2["formula"] = "formula";
  LineType2["frontmatter"] = "frontmatter";
  LineType2["none"] = "none";
})(LineType || (LineType = {}));
var DEFAULT_SETTINGS = {
  AutoFormatting: true,
  ChineseEnglishSpace: true,
  ChineseNoSpace: true,
  Capitalization: true,
  PunctuationSpace: true,
  EnglishSpace: true,
  BraceSpace: true,
  NumberSpace: true,
  InlineCodeSpace: true,
  InlineFormulaSpace: true,
  LinkSpace: true,
  LinkSmartSpace: true,
  FullWidthCharacterEnhance: true,
  UserDefinedRegExp: ":\\w*:\n{{.*?}}",
  UserDefinedRegSwitch: true,
  UserPartSpace: true,
  Debug: false
};
function splitArticle(article, checkFrontMatter = true, beginIndex = 0) {
  let retArray = [];
  let lines = article.split("\n");
  console.log("line number", lines.length);
  let regNullLine = /^\s*$/;
  let regFormulaBegin = /^\s*(\- (\[[x ]\] )?)?\$\$/;
  let regFormulaEnd = /\$\$$/;
  let regCodeBegin = /^\s*```/;
  let regCodeEnd = /^\s*```$/;
  let index = beginIndex;
  let regAdmonitionBlockBegin = /^\s*```ad-\w+/g;
  if (checkFrontMatter) {
    let frontMatterPart;
    for (let i = 0; i < lines.length; i++) {
      if (regNullLine.test(lines[i])) {
        continue;
      } else if (lines[i] === "---") {
        for (let j = i + 1; j < lines.length; j++) {
          if (lines[j] === "---") {
            if (i != 0) {
              retArray.push({
                type: LineType.text,
                begin: 0,
                end: i
              });
            }
            frontMatterPart = {
              type: LineType.frontmatter,
              begin: i,
              end: j + 1
            };
            retArray.push(frontMatterPart);
            index = j + 1;
            break;
          }
        }
        break;
      } else {
        break;
      }
    }
  }
  while (index < lines.length) {
    if (regCodeBegin.test(lines[index])) {
      let j = index + 1;
      while (j < lines.length) {
        if (regCodeEnd.test(lines[j]))
          break;
        j++;
      }
      if (j === lines.length || !regAdmonitionBlockBegin.test(lines[index])) {
        j = j === lines.length ? j - 1 : j;
        retArray.push({
          type: LineType.code,
          begin: index,
          end: j + 1
        });
      } else {
        retArray.push({
          type: LineType.code,
          begin: index,
          end: index + 1
        });
        retArray.push({
          type: LineType.text,
          begin: index + 1,
          end: j
        });
        retArray.push({
          type: LineType.code,
          begin: j,
          end: j + 1
        });
      }
      index = j + 1;
    } else if (regFormulaBegin.test(lines[index])) {
      let regFormulaOneLine = /(?<!\\)\$\$(?! )[^]*?(?<! )(?<!\\)\$\$/g;
      if (regFormulaOneLine.test(lines[index])) {
        retArray.push({
          type: LineType.formula,
          begin: index,
          end: index + 1
        });
        index += 1;
      } else {
        let j = index + 1;
        while (j < lines.length) {
          if (regFormulaEnd.test(lines[j]))
            break;
          j++;
        }
        j = j === lines.length ? j - 1 : j;
        retArray.push({
          type: LineType.formula,
          begin: index,
          end: j + 1
        });
        index = j + 1;
      }
    } else {
      let j = index + 1;
      for (; j < lines.length; j++) {
        if (regCodeBegin.test(lines[j]) || regFormulaBegin.test(lines[j])) {
          break;
        }
      }
      retArray.push({
        type: LineType.text,
        begin: index,
        end: j
      });
      index = j;
    }
  }
  return retArray;
}
function reparseArticleParts(article, prevArticlePart, updateLineStart, print = false) {
  if (prevArticlePart === null || updateLineStart === 0) {
    return splitArticle(article);
  }
  let lines = article.split("\n");
  let res = [];
  let newBeginIndex = 0;
  let changeArticlePartIndex = 0;
  for (let i = 0; i < prevArticlePart.length; i++) {
    if (updateLineStart >= prevArticlePart[i].begin && updateLineStart < prevArticlePart[i].end) {
      newBeginIndex = prevArticlePart[i].begin;
      changeArticlePartIndex = i;
      break;
    } else {
      res.push(prevArticlePart[i]);
    }
  }
  let regAdmonitionBlockBegin = /```ad-\w+/g;
  if (prevArticlePart[changeArticlePartIndex].type === LineType.text && newBeginIndex != 0 && regAdmonitionBlockBegin.test(lines[newBeginIndex - 1])) {
    changeArticlePartIndex -= 1;
    res.pop();
  } else if (prevArticlePart[changeArticlePartIndex].begin === prevArticlePart[changeArticlePartIndex].end - 1 && changeArticlePartIndex >= 2 && regAdmonitionBlockBegin.test(lines[prevArticlePart[changeArticlePartIndex - 2].end - 1])) {
    changeArticlePartIndex -= 2;
    res.pop();
    res.pop();
  }
  if (changeArticlePartIndex === 0) {
    return splitArticle(article);
  }
  newBeginIndex = prevArticlePart[changeArticlePartIndex].begin;
  let newParts = splitArticle(article, false, newBeginIndex);
  for (let j = 0; j < newParts.length; j++) {
    res.push(newParts[j]);
  }
  if (print)
    new import_obsidian.Notice("Reparse Article: begin line index " + newBeginIndex.toString());
  return res;
}
function getLineTypeFromArticleParts(line, typeArray) {
  for (let i = 0; i < typeArray.length; i++) {
    if (line >= typeArray[i].begin && line < typeArray[i].end) {
      return typeArray[i].type;
    }
  }
}
function stringDeleteAt(str, index) {
  return str.substring(0, index) + str.substring(index + 1);
}
function stringInsertAt(str, index, s) {
  return str.substring(0, index) + s + str.substring(index);
}
function splitLine(line, regExps) {
  let regInlineMark = /(?<!\\)\$|(?<!\\)\`/g;
  let regFormulaInline = /(?<!\\)\$(?! )[^]+?(?<! )(?<!\\)\$/g;
  let regFormulaBlock = /(?<!\\)\$\$(?! )[^]*?(?<! )(?<!\\)\$\$/g;
  let regCode = /(?<!\\)`[^]*?(?<!\\)`/g;
  let markQueue = [];
  let arrayOfInlineTextCodeFormula = [];
  while (true) {
    let match = regInlineMark.exec(line);
    if (!match)
      break;
    markQueue.push(match);
  }
  let textBeginIndex = 0;
  while (markQueue.length != 0) {
    let mark = markQueue.shift();
    if (mark.index < textBeginIndex)
      continue;
    if (mark[0] === "$") {
      let matchFormulaBeginIndex;
      let matchFormulaLastIndex;
      regFormulaBlock.lastIndex = mark.index;
      let matchBlockFormula = regFormulaBlock.exec(line);
      if (matchBlockFormula && matchBlockFormula.index === mark.index) {
        matchFormulaBeginIndex = matchBlockFormula.index;
        matchFormulaLastIndex = regFormulaBlock.lastIndex;
      } else {
        regFormulaInline.lastIndex = mark.index;
        let matchInlineFormula = regFormulaInline.exec(line);
        if (matchInlineFormula && matchInlineFormula.index === mark.index) {
          matchFormulaBeginIndex = matchInlineFormula.index;
          matchFormulaLastIndex = regFormulaInline.lastIndex;
        } else {
          continue;
        }
      }
      if (mark.index > textBeginIndex) {
        arrayOfInlineTextCodeFormula.push({
          content: line.substring(textBeginIndex, mark.index),
          type: InlineType.text,
          begin: textBeginIndex,
          end: mark.index
        });
      }
      arrayOfInlineTextCodeFormula.push({
        content: line.substring(matchFormulaBeginIndex, matchFormulaLastIndex),
        type: InlineType.formula,
        begin: matchFormulaBeginIndex,
        end: matchFormulaLastIndex
      });
      textBeginIndex = matchFormulaLastIndex;
      continue;
    } else if (mark[0] === "`") {
      let matchCodeBeginIndex;
      let matchCodeLastIndex;
      regCode.lastIndex = mark.index;
      let matchInlineCode = regCode.exec(line);
      if (matchInlineCode && matchInlineCode.index === mark.index) {
        matchCodeBeginIndex = matchInlineCode.index;
        matchCodeLastIndex = regCode.lastIndex;
        if (mark.index > textBeginIndex) {
          arrayOfInlineTextCodeFormula.push({
            content: line.substring(textBeginIndex, mark.index),
            type: InlineType.text,
            begin: textBeginIndex,
            end: mark.index
          });
        }
        arrayOfInlineTextCodeFormula.push({
          content: line.substring(matchCodeBeginIndex, matchCodeLastIndex),
          type: InlineType.code,
          begin: matchCodeBeginIndex,
          end: matchCodeLastIndex
        });
        textBeginIndex = matchCodeLastIndex;
        continue;
      } else {
        continue;
      }
    }
  }
  if (textBeginIndex != line.length) {
    arrayOfInlineTextCodeFormula.push({
      content: line.substring(textBeginIndex),
      type: InlineType.text,
      begin: textBeginIndex,
      end: line.length
    });
  }
  let retArray = [];
  for (let i = 0; i < arrayOfInlineTextCodeFormula.length; i++) {
    if (arrayOfInlineTextCodeFormula[i].type != InlineType.text) {
      retArray.push(arrayOfInlineTextCodeFormula[i]);
    } else {
      let tempArray;
      if (regExps)
        tempArray = splitTextWithLinkAndUserDefined(arrayOfInlineTextCodeFormula[i].content, regExps);
      else
        tempArray = splitTextWithLinkAndUserDefined(arrayOfInlineTextCodeFormula[i].content);
      tempArray.forEach((item) => {
        item.begin += arrayOfInlineTextCodeFormula[i].begin;
        item.end += arrayOfInlineTextCodeFormula[i].begin;
        retArray.push(item);
      });
    }
  }
  return retArray;
}
function matchWithReg(text, regExp, type, inlineTypeArray, checkArray = false) {
  let retArray = inlineTypeArray;
  let matchArray = [];
  retArray = retArray.sort((a, b) => a.begin - b.begin);
  while (true) {
    let match = regExp.exec(text);
    if (!match)
      break;
    let valid = true;
    if (checkArray) {
      for (let i = 0; i < retArray.length; i++) {
        if (match.index <= retArray[i].begin) {
          if (regExp.lastIndex <= retArray[i].begin) {
            valid = true;
            break;
          } else if (regExp.lastIndex <= retArray[i].end) {
            valid = false;
            break;
          } else if (regExp.lastIndex > retArray[i].end) {
            let removeCount = 1;
            valid = true;
            for (let j = i + 1; j < retArray.length; j++) {
              if (regExp.lastIndex <= retArray[j].begin) {
                removeCount = j - i;
                valid = true;
                break;
              } else if (regExp.lastIndex < retArray[j].end) {
                valid = false;
                break;
              } else {
                continue;
              }
            }
            if (valid) {
              retArray.splice(i, removeCount);
              i -= 1;
            }
            break;
          }
        }
        if (match.index > retArray[i].begin && match.index < retArray[i].end) {
          valid = false;
          break;
        }
      }
    }
    if (!valid)
      continue;
    matchArray.push({
      content: match[0],
      type,
      begin: match.index,
      end: regExp.lastIndex
    });
  }
  retArray = retArray.concat(matchArray);
  return retArray;
}
function splitTextWithLinkAndUserDefined(text, regExps) {
  let retArray = [];
  let regWikiLink = /\!?\[\[[^\[\]]*?\]\]/g;
  let regMdLink = /\!?\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
  let regBareLink = /(https?:\/\/|ftp:\/\/|obsidian:\/\/|zotero:\/\/|www.)[^\s（）《》。，！？；：“”‘’\)\(\[\]\{\}']+/g;
  retArray = matchWithReg(text, regWikiLink, InlineType.link, retArray);
  retArray = matchWithReg(text, regMdLink, InlineType.link, retArray);
  let regExpList = [];
  if (regExps) {
    let regs = regExps.split("\n");
    for (let i = 0; i < regs.length; i++) {
      let regNull = /^\s*$/g;
      if (regNull.test(regs[i]))
        continue;
      let isValidReg = true;
      try {
        let regTemp = new RegExp(regs[i], "g");
      } catch (error) {
        isValidReg = false;
        new import_obsidian.Notice("Bad RegExp:" + regs[i]);
      }
      if (isValidReg) {
        regExpList.push(new RegExp(regs[i], "g"));
      }
    }
    let regLen = regExpList.length;
    for (let i = 0; i < regLen; i++) {
      retArray = matchWithReg(text, regExpList[i], InlineType.user, retArray, true);
    }
  }
  retArray = matchWithReg(text, regBareLink, InlineType.link, retArray, true);
  retArray = retArray.sort((a, b) => a.begin - b.begin);
  let textArray = [];
  let textBegin = 0;
  let textEnd = 0;
  for (let i = 0; i < retArray.length; i++) {
    if (textBegin < retArray[i].begin) {
      textEnd = retArray[i].begin;
      textArray.push({
        content: text.substring(textBegin, textEnd),
        type: InlineType.text,
        begin: textBegin,
        end: textEnd
      });
    }
    textBegin = retArray[i].end;
  }
  if (textBegin != text.length) {
    textArray.push({
      content: text.substring(textBegin, text.length),
      type: InlineType.text,
      begin: textBegin,
      end: text.length
    });
  }
  retArray = retArray.concat(textArray);
  retArray = retArray.sort((a, b) => a.begin - b.begin);
  return retArray;
}
function formatLine(line, curCursor, settings, prevCursor) {
  let ch = curCursor.ch;
  if (line === "")
    return ["", 0, []];
  let lineParts;
  if (settings.UserDefinedRegSwitch) {
    lineParts = splitLine(line, settings.UserDefinedRegExp);
  } else {
    lineParts = splitLine(line);
  }
  let linePartsOrigin = JSON.parse(JSON.stringify(lineParts));
  let inlineChangeList = [];
  let cursorLinePartIndex = -1;
  let cursorRelativeIndex = -1;
  let resultCursorCh = 0;
  for (let i = 0; i < lineParts.length; i++) {
    if (ch > lineParts[i].begin && ch <= lineParts[i].end) {
      cursorLinePartIndex = i;
      cursorRelativeIndex = ch - lineParts[i].begin;
      if (lineParts[i].type === InlineType.text) {
        lineParts[i].content = stringInsertAt(lineParts[i].content, cursorRelativeIndex, "\0");
      }
      break;
    }
  }
  let resultLine = "";
  let offset = 0;
  let prevPartType = InlineType.none;
  let prevTextEndWithSpace = false;
  for (let i = 0; i < lineParts.length; i++) {
    if (i === 0 && lineParts[i].type === InlineType.text && settings.Capitalization) {
      if (prevCursor && cursorLinePartIndex != 0) {
      } else {
        let regFirstSentence = /^\s*(\- (\[[x ]\] )?)?[a-z]/g;
        let regHeaderSentence = /^(#+ |>+ ?)[a-z]/g;
        let textcopy = lineParts[0].content;
        let match = regFirstSentence.exec(textcopy);
        let matchHeader = regHeaderSentence.exec(textcopy);
        let dstCharIndex = -1;
        if (match) {
          dstCharIndex = regFirstSentence.lastIndex - 1;
        } else if (matchHeader) {
          dstCharIndex = regHeaderSentence.lastIndex - 1;
        }
        if (!prevCursor) {
        } else if (prevCursor.line === curCursor.line && dstCharIndex >= prevCursor.ch && dstCharIndex < curCursor.ch) {
        } else {
          dstCharIndex = -1;
        }
        if (dstCharIndex != -1) {
          lineParts[0].content = textcopy.substring(0, dstCharIndex) + textcopy.charAt(dstCharIndex).toUpperCase() + textcopy.substring(dstCharIndex + 1);
        }
      }
    }
    switch (lineParts[i].type) {
      case InlineType.text:
        let content = lineParts[i].content;
        if (settings.Capitalization) {
          var reg = /[\.\?\!。！？]([\s]*)[a-z]/g;
          while (true) {
            let match = reg.exec(content);
            if (!match)
              break;
            let tempIndex = reg.lastIndex - 1;
            if (!prevCursor) {
              lineParts[i].content = content.substring(0, tempIndex) + content.charAt(tempIndex).toUpperCase() + content.substring(reg.lastIndex);
              content = lineParts[i].content;
            } else if (prevCursor && cursorLinePartIndex === i && prevCursor.line === curCursor.line) {
              if (tempIndex >= prevCursor.ch - offset && tempIndex < curCursor.ch - offset) {
                lineParts[i].content = content.substring(0, tempIndex) + content.charAt(tempIndex).toUpperCase() + content.substring(reg.lastIndex);
                content = lineParts[i].content;
              }
            }
          }
        }
        if (settings.ChineseEnglishSpace) {
          let reg1 = /([A-Za-z0-9,\.;\?:!])([\u4e00-\u9fa5]+)/gi;
          let reg22 = /([\u4e00-\u9fa5]+)([A-Za-z0-9])/gi;
          lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg22, "$1 $2");
          content = lineParts[i].content;
        }
        if (settings.ChineseNoSpace) {
          let reg3 = /([\u4e00-\u9fa5，。、；‘’《》]+)(\s+)([\u4e00-\u9fa5，。、；‘’《》]+)/g;
          while (reg3.exec(content)) {
            lineParts[i].content = content.replace(reg3, "$1$3");
            content = lineParts[i].content;
          }
        }
        if (settings.PunctuationSpace) {
          {
            let reg3 = /([,\.;\?\!])([A-Za-z])/gi;
            while (true) {
              let match = reg3.exec(content);
              if (!match)
                break;
              let tempIndex = reg3.lastIndex - 1;
              if (!prevCursor) {
                content = content.substring(0, tempIndex) + " " + content.substring(tempIndex);
              } else if (prevCursor && cursorLinePartIndex === i && prevCursor.line === curCursor.line) {
                if (tempIndex >= prevCursor.ch - offset && tempIndex < curCursor.ch - offset) {
                  content = content.substring(0, tempIndex) + " " + content.substring(tempIndex);
                }
              }
            }
            var reg2 = /(:)([A-Za-z0-9_]+[ ,\.\?\\\/;'"，。？；‘“”’、\[\]\-\{\}])/gi;
            lineParts[i].content = content.replace(reg2, "$1 $2");
            content = lineParts[i].content;
          }
          {
            let reg1 = /(\))([A-Za-z0-9\u4e00-\u9fa5]+)/gi;
            let reg22 = /([A-Za-z0-9\u4e00-\u9fa5:,\.\?\!'"]+)(\()/gi;
            lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg22, "$1 $2");
            content = lineParts[i].content;
          }
          {
            let reg1 = /([,;\?\!\]\}])([0-9])/g;
            let reg22 = /([0-9])([\[\{])/g;
            lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg22, "$1 $2");
            content = lineParts[i].content;
          }
        }
        let regStartWithSpace = /^\0?[\s,\.;\?\!，。；？！、（\]\)\}]/;
        let regEndWithSpace = /[\s，。、：？！）\[\(\{]\0?$/;
        let textStartWithSpace = regStartWithSpace.test(content);
        let textEndWithSpace = regEndWithSpace.test(content);
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace && !textStartWithSpace) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace && !textStartWithSpace) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
            }
            break;
          case InlineType.link:
            if (lineParts[i].content.charAt(0) === " ")
              break;
            let regBareLink = /(https?:\/\/|ftp:\/\/|obsidian:\/\/|zotero:\/\/|www.)[^\s（）《》。,;:，！？；：“”‘’\)\(\[\]\{\}']+/g;
            let isBareLink = false;
            isBareLink = regBareLink.test(lineParts[i - 1].content);
            if (isBareLink) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
              break;
            }
            if (settings.LinkSmartSpace && !textStartWithSpace) {
              let regTestWikiLink = /\!?\[\[[^\[\]]*?\]\]/;
              let regMdLink = /\!?\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
              let regNoNeedSpace = /[\u4e00-\u9fa5][\u4e00-\u9fa5]/g;
              let twoNeighborChars = "";
              let charAtTextBegin = lineParts[i].content.charAt(0);
              let charAtLinkEnd = "";
              let linkWithNoText = false;
              if (regTestWikiLink.test(lineParts[i - 1].content)) {
                charAtLinkEnd = lineParts[i - 1].content.charAt(lineParts[i - 1].content.length - 3);
                if (charAtLinkEnd === "[")
                  linkWithNoText = true;
              } else if (regMdLink.test(lineParts[i - 1].content)) {
                let regMdLinkEnd = /\]/;
                let charAtLinkEndIndex = lineParts[i - 1].content.search(regMdLinkEnd) - 1;
                charAtLinkEnd = lineParts[i - 1].content.charAt(charAtLinkEndIndex);
                if (charAtLinkEnd === "[")
                  linkWithNoText = true;
              }
              twoNeighborChars = charAtLinkEnd + charAtTextBegin;
              if (!linkWithNoText && !regNoNeedSpace.test(twoNeighborChars)) {
                lineParts[i].content = " " + content;
                content = lineParts[i].content;
              }
            } else if (!settings.LinkSmartSpace && settings.LinkSpace && !textStartWithSpace) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace && !textStartWithSpace) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          let reg3 = "\0";
          let n = content.search(reg3);
          resultCursorCh = offset + n;
          lineParts[i].content = stringDeleteAt(content, n);
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.text;
        prevTextEndWithSpace = textEndWithSpace;
        break;
      case InlineType.code:
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.text:
            if (settings.InlineCodeSpace && !prevTextEndWithSpace) {
              lineParts[i - 1].content += " ";
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace || settings.InlineCodeSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.link:
            if (settings.LinkSpace || settings.InlineCodeSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace || settings.InlineCodeSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          resultCursorCh = offset + cursorRelativeIndex;
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.code;
        prevTextEndWithSpace = false;
        break;
      case InlineType.formula:
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.text:
            if (settings.InlineFormulaSpace && !prevTextEndWithSpace) {
              lineParts[i - 1].content += " ";
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace || settings.InlineFormulaSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.link:
            if (settings.LinkSpace || settings.InlineFormulaSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace || settings.InlineFormulaSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          resultCursorCh = offset + cursorRelativeIndex;
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.formula;
        prevTextEndWithSpace = false;
        break;
      case InlineType.link:
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.text:
            let charAtTextEnd = lineParts[i - 1].content.charAt(lineParts[i - 1].content.length - 1);
            if (charAtTextEnd === " ")
              break;
            if (settings.LinkSmartSpace && !prevTextEndWithSpace) {
              let regTestWikiLink = /\!?\[\[[^\[\]]*?\]\]/;
              let regMdLink = /\!?\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
              let regNoNeedSpace = /[\u4e00-\u9fa5][\u4e00-\u9fa5]/g;
              let isBareLink = false;
              let twoNeighborChars = "";
              let charAtLinkBegin = "";
              let linkWithNoText = false;
              if (regTestWikiLink.test(lineParts[i].content)) {
                let beginIndex = 2;
                if (lineParts[i].content.charAt(0) === "!")
                  beginIndex = 3;
                charAtLinkBegin = lineParts[i].content.charAt(beginIndex);
                if (charAtLinkBegin === "]")
                  linkWithNoText = true;
              } else if (regMdLink.test(lineParts[i].content)) {
                let regMdLinkBegin = /\[/;
                let charAtLinkBeginIndex = lineParts[i].content.search(regMdLinkBegin) + 1;
                charAtLinkBegin = lineParts[i].content.charAt(charAtLinkBeginIndex);
                if (charAtLinkBegin === "]")
                  linkWithNoText = true;
              } else {
                isBareLink = true;
              }
              twoNeighborChars = charAtTextEnd + charAtLinkBegin;
              if (!linkWithNoText && (isBareLink || !regNoNeedSpace.test(twoNeighborChars))) {
                lineParts[i - 1].content += " ";
                resultLine += " ";
                offset += 1;
              }
            } else if (settings.LinkSpace && !prevTextEndWithSpace) {
              lineParts[i - 1].content += " ";
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace || settings.LinkSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace || settings.LinkSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.link:
            if (settings.LinkSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace || settings.LinkSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          resultCursorCh = offset + cursorRelativeIndex;
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.link;
        prevTextEndWithSpace = false;
        break;
      case InlineType.user:
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.text:
            if (settings.UserPartSpace && !prevTextEndWithSpace) {
              lineParts[i - 1].content += " ";
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace || settings.UserPartSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace || settings.UserPartSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.link:
            if (settings.LinkSpace || settings.UserPartSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          resultCursorCh = offset + cursorRelativeIndex;
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.user;
        prevTextEndWithSpace = false;
        break;
    }
  }
  for (let i = 0; i < lineParts.length; i++) {
    if (lineParts[i].type === InlineType.text && lineParts[i].content != linePartsOrigin[i].content) {
      inlineChangeList.push({
        text: lineParts[i].content,
        begin: linePartsOrigin[i].begin,
        end: linePartsOrigin[i].end,
        origin: linePartsOrigin[i].content
      });
    }
  }
  inlineChangeList = inlineChangeList.sort((a, b) => a.begin - b.begin);
  return [resultLine, resultCursorCh, inlineChangeList];
}
function isPositionBefore(pos1, pos2) {
  if (pos1.line < pos2.line)
    return true;
  else if (pos1.line > pos2.line)
    return false;
  else {
    if (pos1.ch < pos2.ch)
      return true;
    else
      return false;
  }
}

// main.ts
var EasyTypingPlugin = class extends import_obsidian2.Plugin {
  constructor() {
    super(...arguments);
    this.getEditor = () => {
      let editor = null;
      let markdownView = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
      if (markdownView) {
        editor = markdownView.editor;
      }
      if (editor === null && this.settings.Debug)
        console.log("can't get editor");
      return editor;
    };
    this.formatSelection = () => {
      if (this.settings.Debug) {
        console.log("Begin format Selection");
      }
      let editor = this.getEditor();
      if (!editor)
        return;
      if (!editor.somethingSelected() || editor.getSelection() === "")
        return;
      let selection = editor.listSelections()[0];
      let lineBeginReparse = selection.anchor.line;
      if (lineBeginReparse > selection.head.line) {
        lineBeginReparse = selection.head.line;
      }
      this.reparseArticle = { check: true, beginLineNumber: lineBeginReparse };
      let selectedArticle = editor.getSelection();
      let articleParts = splitArticle(selectedArticle);
      let lines = selectedArticle.split("\n");
      let result = "";
      for (let i = 0; i < articleParts.length; i++) {
        if (articleParts[i].type != LineType.text) {
          for (let j = articleParts[i].begin; j < articleParts[i].end; j++) {
            let line = lines[j];
            result += line + "\n";
          }
        } else {
          for (let j = articleParts[i].begin; j < articleParts[i].end; j++) {
            let line = lines[j];
            let newline = formatLine(line, { line: 0, ch: line.length }, this.settings)[0];
            result += newline + "\n";
          }
        }
      }
      result = result.substring(0, result.length - 1);
      editor.replaceSelection(result);
      this.updateArticleParts(editor);
      if (this.settings.Debug) {
        new import_obsidian2.Notice("Format Selection Done!");
        console.log("End format Selection");
      }
    };
    this.handleBeforeInput = (ev) => {
      if (this.settings.Debug)
        console.log("===> Before Input");
      if (!this.settings.FullWidthCharacterEnhance)
        return;
      let editor = this.getEditor();
      if (!editor)
        return;
      let specialChar = new Set(["\u3010", "\u3011", "\xB7", "=", "\u201C", "\u201D", "\u300A", "\u300B", "\u2018", "\u2019", "\uFF08", "\uFF09", "\uFFE5"]);
      if (editor.somethingSelected() && editor.getSelection() != "") {
        if (ev.data.length != 1 || specialChar.has(editor.getSelection()))
          return;
        let selectedFormatRange = editor.listSelections()[0];
        let begin;
        let end;
        let anchor;
        let head;
        if (isPositionBefore(selectedFormatRange.anchor, selectedFormatRange.head)) {
          begin = selectedFormatRange.anchor;
        } else {
          begin = selectedFormatRange.head;
        }
        end = { line: begin.line, ch: begin.ch + 1 };
        anchor = { line: selectedFormatRange.anchor.line, ch: selectedFormatRange.anchor.ch + 1 };
        head = { line: selectedFormatRange.head.line, ch: selectedFormatRange.head.ch + 1 };
        let text;
        switch (ev.data) {
          case "\u3010":
          case "\u3011":
            text = "[" + editor.getSelection() + "]";
            break;
          case "\xB7":
            text = "`" + editor.getSelection() + "`";
            this.reparseArticle.check = true;
            this.reparseArticle.beginLineNumber = begin.line;
            break;
          case "\uFFE5":
          case "\xA5":
            text = "$" + editor.getSelection() + "$";
            this.reparseArticle.check = true;
            this.reparseArticle.beginLineNumber = begin.line;
            break;
          case "\u201C":
          case "\u201D":
            text = "\u201C" + editor.getSelection() + "\u201D";
            break;
          case "\u2018":
          case "\u2019":
            text = "\u2018" + editor.getSelection() + "\u2019";
            break;
          case "\u300A":
          case "\u300B":
            text = "\u300A" + editor.getSelection() + "\u300B";
            break;
          case "\uFF08":
          case "\uFF09":
            console.log("I am here");
            text = "\uFF08" + editor.getSelection() + "\uFF09";
            break;
          case "{":
          case "}":
            text = "{" + editor.getSelection() + "}";
            break;
          default:
            this.prevCursor = begin;
            let regReparse = /^[\-\$\`]|[\-\$\`]\s*$|\n/m;
            let reg = /[-\`\$]/;
            if (regReparse.test(editor.getSelection()) || reg.test(ev.data)) {
              this.reparseArticle.check = true;
              this.reparseArticle.beginLineNumber = begin.line;
            }
            this.selectionTextChange = null;
            return;
        }
        this.selectionTextChange = {
          begin,
          end,
          text,
          selection: true,
          selectionAnchor: anchor,
          selectionHead: head
        };
      }
    };
    this.handleKeydown = (evt) => {
      if (this.settings.Debug) {
        console.log("=========================");
        console.log("keydown:", evt.key);
      }
      let editor = this.getEditor();
      if (!editor)
        return;
      this.keyDownFlag = true;
      if (evt.key === "Control")
        this.ctrlDownLineIndex = editor.getCursor().line;
    };
    this.handleKeyup = (evt) => {
      if (this.settings.Debug) {
        console.log("=========================");
        console.log("keyup:", evt.key);
      }
      let editor = this.getEditor();
      if (!editor)
        return;
      this.keyDownFlag = false;
      if (evt.key === "Process") {
        return;
      }
      if (evt.key != "Backspace" && evt.key != "Enter" && evt.key != "Delete") {
        this.updateSelection(editor);
      }
      if (this.selectionTextChange && this.settings.AutoFormatting) {
        editor.replaceRange(this.selectionTextChange.text, this.selectionTextChange.begin, this.selectionTextChange.end);
        editor.setSelection(this.selectionTextChange.selectionAnchor, this.selectionTextChange.selectionHead);
        this.prevCursor = this.selectionTextChange.selectionHead;
        this.selectionTextChange = null;
        this.editorChanged = false;
        return;
      }
      this.selectionTextChange = null;
      if (!this.editorChanged || this.settings.AutoFormatting === false) {
        this.prevCursor = editor.getCursor();
        this.editorChanged = false;
        return;
      }
      if (evt.ctrlKey && (evt.key === "z" || evt.key === "y" || evt.key === "x")) {
        let lineReparseBegin = editor.getCursor().line;
        if (lineReparseBegin > this.ctrlDownLineIndex) {
          lineReparseBegin = this.ctrlDownLineIndex;
        }
        this.reparseArticle = { check: true, beginLineNumber: lineReparseBegin };
        this.updateArticleParts(editor);
        this.prevCursor = editor.getCursor();
        this.editorChanged = false;
        return;
      }
      let regTestReparse = /^[\-\$`]|[\-\$\`]\s*$|\n|\$\$|---|```/gm;
      switch (evt.key) {
        case "Backspace":
          if (this.selectedText != "" && !regTestReparse.test(this.selectedText) || this.selectedText === "" && !regTestReparse.test(this.charBeforeCursor)) {
            this.reparseArticle.check = false;
          } else {
            this.reparseArticle = { check: true, beginLineNumber: editor.getCursor().line };
          }
          this.updateSelection(editor);
          this.prevCursor = editor.getCursor();
          this.editorChanged = false;
          this.updateArticleParts(editor);
          return;
        case "Delete":
          if (this.selectedText != "" && !regTestReparse.test(this.selectedText) || this.selectedText === "" && !regTestReparse.test(this.charAfterCursor)) {
            this.reparseArticle.check = false;
          } else {
            this.reparseArticle = { check: true, beginLineNumber: editor.getCursor().line };
          }
          this.updateSelection(editor);
          this.prevCursor = editor.getCursor();
          this.editorChanged = false;
          this.updateArticleParts(editor);
          return;
        case "Enter":
          let prevLineIndex = editor.getCursor().line - 1;
          prevLineIndex = prevLineIndex > 0 ? prevLineIndex : 0;
          if (!evt.ctrlKey)
            this.reparseArticle = { check: true, beginLineNumber: editor.getCursor().line - 1 };
          this.updateArticleParts(editor);
          if (this.isTextPart(prevLineIndex)) {
            let prevLineEndCursor = { line: prevLineIndex, ch: editor.getLine(prevLineIndex).length };
            this.updateLine(editor, prevLineIndex, prevLineEndCursor, this.settings, prevLineEndCursor, editor.getCursor());
          }
          this.updateSelection(editor);
          this.prevCursor = editor.getCursor();
          this.editorChanged = false;
          return;
        default:
          break;
      }
      let cursor = editor.getCursor();
      {
        let twoCharactersBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
        let threeCharactersBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 3 }, { line: cursor.line, ch: cursor.ch });
        if (twoCharactersBeforeCursor === "$$" || threeCharactersBeforeCursor === "```" || threeCharactersBeforeCursor == "---") {
          this.reparseArticle = { check: true, beginLineNumber: cursor.line };
        }
      }
      if (this.settings.FullWidthCharacterEnhance && !editor.somethingSelected()) {
        let twoCharactersBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
        let charBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
        let character2cursor1 = editor.getRange({ line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
        let twoCharactersAfterCursor = editor.getRange({ line: cursor.line, ch: cursor.ch }, { line: cursor.line, ch: cursor.ch + 2 });
        switch (evt.key) {
          case "$":
          case "\uFFE5":
          case "\xA5":
            if (twoCharactersBeforeCursor === "\uFFE5\uFFE5" || twoCharactersBeforeCursor === "\xA5\xA5") {
              editor.replaceRange("$$", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            } else if (twoCharactersBeforeCursor === "$$") {
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            } else if (character2cursor1 === "$\uFFE5$" || character2cursor1 === "$\xA5$") {
              editor.replaceRange("$$", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor(cursor);
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            }
            break;
          case "[":
          case "\u3010":
            if (twoCharactersBeforeCursor === "[[" && twoCharactersAfterCursor != "]]" && !editor.somethingSelected()) {
              editor.replaceRange("[[]]", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor(cursor);
            }
            break;
          case "`":
          case "\xB7":
            if (twoCharactersBeforeCursor === "\xB7\xB7") {
              editor.replaceRange("``", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            } else if (character2cursor1 === "`\xB7`") {
              editor.replaceRange("`", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch + 1 });
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            }
            break;
          case "\uFF1A":
          case ":":
            if (twoCharactersBeforeCursor === "\uFF1A\uFF1A") {
              editor.replaceRange(":", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case `,`:
          case `\uFF0C`:
            if (twoCharactersBeforeCursor === "\uFF0C\uFF0C") {
              editor.replaceRange(",", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "\u3001":
          case "/":
            if (cursor.ch === 1 && charBeforeCursor === "\u3001") {
              editor.replaceRange("/", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
            } else if (twoCharactersBeforeCursor === "\u3001\u3001") {
              editor.replaceRange("/", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "\u3002":
          case ".":
            if (twoCharactersBeforeCursor === "\u3002\u3002") {
              editor.replaceRange(".", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case `;`:
          case `\uFF1B`:
            if (twoCharactersBeforeCursor === "\uFF1B\uFF1B") {
              editor.replaceRange(";", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "(":
          case "\uFF08":
            if (twoCharactersBeforeCursor === "\uFF08\uFF08") {
              editor.replaceRange("()", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "\u300B":
          case ">":
            if (cursor.ch === 1 && charBeforeCursor === "\u300B") {
              editor.replaceRange(">", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
            } else if (twoCharactersBeforeCursor === "\u300B\u300B") {
              editor.replaceRange(">", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            } else if (twoCharactersBeforeCursor === ">\u300B") {
              editor.replaceRange(">", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor(cursor);
            }
            break;
          case "<":
          case "\u300A":
            if (twoCharactersBeforeCursor === "\u300A\u300A") {
              editor.replaceRange("<", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "!":
          case "\uFF01":
            if (twoCharactersBeforeCursor === "\uFF01\uFF01") {
              editor.replaceRange("!", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "|":
          case "\uFF5C":
            if (twoCharactersBeforeCursor === "\uFF5C\uFF5C") {
              editor.replaceRange("|", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          default:
            break;
        }
      }
      cursor = editor.getCursor();
      this.updateSelection(editor);
      this.updateArticleParts(editor);
      if (getLineTypeFromArticleParts(cursor.line, this.articleParts) != LineType.text) {
        this.prevCursor = editor.getCursor();
        this.editorChanged = false;
        return;
      }
      this.updateLine(editor, cursor.line, cursor, this.settings, this.prevCursor);
      this.prevCursor = editor.getCursor();
      this.editorChanged = false;
    };
    this.isTextPart = (lineIndex) => {
      if (getLineTypeFromArticleParts(lineIndex, this.articleParts) === LineType.text) {
        return true;
      }
      return false;
    };
    this.handleClick = () => {
      if (this.settings.Debug)
        console.log("===>Click event triggered");
      let editor = this.getEditor();
      if (!editor)
        return;
      this.prevCursor = editor.getCursor();
      this.updateSelection(editor);
    };
    this.handleFileOpen = (file) => {
      if (file != null) {
        if (this.settings.Debug)
          console.log("===>File open:", file.vault.getName() + "/" + file.path);
        this.reparseArticle = { check: true, beginLineNumber: 0 };
        this.articleParts = null;
      }
    };
    this.handlePaste = (evt, editor, markdownView) => {
      let cursor = editor.getCursor();
      if (this.settings.Debug) {
        console.log("===>Before-Paste");
      }
      this.reparseArticle = { check: true, beginLineNumber: cursor.line };
      this.updateArticleParts(editor);
    };
    this.handleChange = (editor, markdownView) => {
      if (this.settings.Debug) {
        console.log("===>Change Event");
      }
      this.editorChanged = true;
    };
    this.handleSelectBegin = (ev) => {
      if (this.keyDownFlag)
        return;
      if (this.settings.Debug) {
        console.log("===>Select Event");
      }
      let editor = this.getEditor();
      if (!editor)
        return;
      this.updateSelection(editor);
    };
    this.updateArticleParts = (editor) => {
      if (this.reparseArticle.check || this.articleParts === null) {
        this.articleParts = reparseArticleParts(editor.getValue(), this.articleParts, this.reparseArticle.beginLineNumber, this.settings.Debug);
        this.reparseArticle.check = false;
      }
    };
    this.printArticleParts = (editor) => {
      let article = editor.getValue();
      let lines = article.split("\n");
      console.log("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
      for (let i = 0; i < this.articleParts.length; i++) {
        console.log("Article Part:", this.articleParts[i].type, this.articleParts[i].begin, this.articleParts[i].end);
        for (let j = this.articleParts[i].begin; j < this.articleParts[i].end; j++) {
          console.log(lines[j]);
        }
      }
      console.log("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
    };
    this.updateSelection = (editor) => {
      this.selectedText = editor.getSelection();
      this.updateCharAroundCursor(editor);
    };
    this.updateCharAroundCursor = (editor) => {
      if (this.selectedText != "")
        return;
      let cursor = editor.getCursor();
      if (cursor.ch != 0) {
        this.charBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 1 }, cursor);
      } else {
        this.charBeforeCursor = cursor.line != 0 ? "\n" : "";
      }
      if (cursor.ch != editor.getLine(cursor.line).length) {
        this.charAfterCursor = editor.getRange(cursor, { line: cursor.line, ch: cursor.ch + 1 });
      } else {
        this.charAfterCursor = cursor.line != editor.lineCount() - 1 ? "\n" : "";
      }
    };
    this.updateLine = (editor, lineIndex, curCursor, settings, prevCursor, setCursor) => {
      let formattedChange = formatLine(editor.getLine(lineIndex), curCursor, this.settings, this.prevCursor);
      let resultLine = formattedChange[0];
      let resultCurosrCh = formattedChange[1];
      let inlineChangeList = formattedChange[2];
      if (inlineChangeList.length != 0) {
        let offset = 0;
        for (let i = 0; i < inlineChangeList.length; i++) {
          let changeBegin = {
            line: lineIndex,
            ch: inlineChangeList[i].begin + offset
          };
          let changeEnd = {
            line: lineIndex,
            ch: inlineChangeList[i].end + offset
          };
          offset += inlineChangeList[i].text.length - inlineChangeList[i].origin.length;
          editor.replaceRange(inlineChangeList[i].text, changeBegin, changeEnd);
        }
        if (!setCursor) {
          editor.setCursor({
            line: lineIndex,
            ch: resultCurosrCh
          });
        } else {
          editor.setCursor(setCursor);
        }
        editor.focus();
      }
    };
  }
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.prevCursor = { line: 0, ch: 0 };
      this.selectionTextChange = null;
      this.editorChanged = false;
      this.keyUpdateCursor = new Set(["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"]);
      this.articleParts = null;
      this.reparseArticle = {
        check: true,
        beginLineNumber: 0
      };
      this.keyDownFlag = false;
      this.selectedText = "";
      this.charBeforeCursor = "";
      this.charAfterCursor = "";
      this.ctrlDownLineIndex = 0;
      this.addCommand({
        id: "easy-typing-format-selection",
        name: "format selected text",
        callback: () => this.formatSelection(),
        hotkeys: [{
          modifiers: ["Ctrl", "Shift"],
          key: "s"
        }]
      });
      this.addCommand({
        id: "easy-typing-format-switch",
        name: "switch autoformat",
        callback: () => this.switchAutoFormatting(),
        hotkeys: [{
          modifiers: ["Ctrl"],
          key: "tab"
        }]
      });
      this.addSettingTab(new EasyTypingSettingTab(this.app, this));
      this.registerEvent(this.app.workspace.on("editor-change", this.handleChange));
      this.registerEvent(this.app.workspace.on("editor-paste", this.handlePaste));
      this.registerEvent(this.app.workspace.on("file-open", this.handleFileOpen));
      this.registerEvent(this.app.workspace.on("click", this.handleClick));
      this.registerDomEvent(document, "keyup", this.handleKeyup);
      this.registerDomEvent(document, "keydown", this.handleKeydown);
      this.registerDomEvent(document, "beforeinput", this.handleBeforeInput);
      this.registerDomEvent(document, "selectionchange", this.handleSelectBegin);
    });
  }
  onunload() {
  }
  switchAutoFormatting() {
    this.settings.AutoFormatting = this.settings.AutoFormatting ? false : true;
    let status = this.settings.AutoFormatting ? "on" : "off";
    new import_obsidian2.Notice("Autoformat is " + status + "!");
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
var EasyTypingSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("a", { text: "More detail is in Github: easy-typing-obsidian", href: "https://github.com/Yaozhuwa/easy-typing-obsidian" });
    containerEl.createEl("h2", { text: "\u603B\u5F00\u5173 (Master Switch)" });
    new import_obsidian2.Setting(containerEl).setName("Auto formatting when typing").setDesc("\u662F\u5426\u5728\u7F16\u8F91\u6587\u6863\u65F6\u81EA\u52A8\u683C\u5F0F\u5316\u6587\u672C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.AutoFormatting).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.AutoFormatting = value;
        console.log("AutoFormatting:", value);
        yield this.plugin.saveSettings();
      }));
    });
    containerEl.createEl("h2", { text: "\u8BE6\u7EC6\u89C4\u5219\u5F00\u5173 (Sub Switches)" });
    new import_obsidian2.Setting(containerEl).setName("Full-Width symbol input enhancement").setDesc("\u5168\u89D2\u7B26\u53F7\u8F93\u5165\u589E\u5F3A").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.FullWidthCharacterEnhance).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.FullWidthCharacterEnhance = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between Chinese and English/number").setDesc("\u5728\u4E2D\u6587\u548C\u82F1\u6587/\u6570\u5B57\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.ChineseEnglishSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.ChineseEnglishSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Delete the Space between Chinese characters").setDesc("\u5728\u4E2D\u6587\u5B57\u7B26\u95F4\u53BB\u9664\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.ChineseNoSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.ChineseNoSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Smartly insert space between text and punctuation").setDesc("\u5728\u6587\u672C\u548C\u6807\u70B9\u95F4\u667A\u80FD\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.PunctuationSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.PunctuationSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Capitalize the first letter of every sentence").setDesc("\u82F1\u6587\u6BCF\u4E2A\u53E5\u9996\u5B57\u6BCD\u5927\u5199").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.Capitalization).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.Capitalization = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between inline code and text").setDesc("\u5728 `\u884C\u5185\u4EE3\u7801` \u548C\u6587\u672C\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.InlineCodeSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.InlineCodeSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between inline formula and text").setDesc("\u5728 $\u884C\u5185\u516C\u5F0F$ \u548C\u6587\u672C\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.InlineFormulaSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.InlineFormulaSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between link and text").setDesc("\u5728 [[wikilink]] mdlink \u548C\u6587\u672C\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.LinkSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.LinkSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Smart Space between link and text").setDesc("\u5728 [[wikilink]] mdlink \u548C\u6587\u672C\u95F4\u667A\u80FD\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.LinkSmartSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.LinkSmartSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    containerEl.createEl("h2", { text: "\u81EA\u5B9A\u4E49\u6B63\u5219 (Custom regular expressions)" });
    new import_obsidian2.Setting(containerEl).setName("User Defined RegExp Switch").setDesc("\u81EA\u5B9A\u4E49\u6B63\u5219\u8868\u8FBE\u5F0F\u5F00\u5173\uFF0C\u5339\u914D\u5230\u7684\u5185\u5BB9\u4E0D\u8FDB\u884C\u683C\u5F0F\u5316").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.UserDefinedRegSwitch).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.UserDefinedRegSwitch = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between User Defined Part(selected by RegExp) and text").setDesc("\u5728\u7528\u6237\u81EA\u5B9A\u4E49\u533A\u5757(\u6B63\u5219\u8868\u8FBE\u5F0F\u9009\u62E9)\u548C\u6587\u672C\u4E4B\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.UserPartSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.UserPartSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("User defined RegExp to ignore, one expression per line").setDesc("\u7528\u6237\u81EA\u5B9A\u4E49\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u5339\u914D\u5230\u7684\u5185\u5BB9\u4E0D\u8FDB\u884C\u683C\u5F0F\u5316\uFF0C\u6BCF\u884C\u4E00\u4E2A\u8868\u8FBE\u5F0F\uFF0C\u884C\u5C3E\u4E0D\u8981\u968F\u610F\u52A0\u7A7A\u683C").addTextArea((text) => text.setPlaceholder(":\\w*:\n{{.*?}}").setValue(this.plugin.settings.UserDefinedRegExp).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.UserDefinedRegExp = value;
      if (this.plugin.settings.Debug)
        console.log("regExp changed:", value);
      yield this.plugin.saveSettings();
    })));
    containerEl.createEl("a", { text: "RegExp: \u6B63\u5219\u8868\u8FBE\u5F0F", href: "https://javascript.ruanyifeng.com/stdlib/regexp.html#" });
    containerEl.createEl("h2", { text: "Debug" });
    new import_obsidian2.Setting(containerEl).setName("Print debug info in console").setDesc("\u5728\u63A7\u5236\u53F0\u8F93\u51FA\u8C03\u8BD5\u4FE1\u606F").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.Debug).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.Debug = value;
        yield this.plugin.saveSettings();
      }));
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJjb3JlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBNb2RhbCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFdvcmtzcGFjZSwgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgRWRpdG9yUG9zaXRpb24sIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBJbmxpbmVUeXBlLCBMaW5lVHlwZSwgQXJ0aWNsZVBhcnQsIElubGluZVBhcnQsIElubGluZUNoYW5nZSB9IGZyb20gXCIuL2NvcmVcIiBcclxuaW1wb3J0IHsgRm9ybWF0U2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL2NvcmUnXHJcbmltcG9ydCB7IHNwbGl0QXJ0aWNsZSwgc3BsaXRMaW5lLCBmb3JtYXRMaW5lLCBnZXRMaW5lVHlwZUZyb21BcnRpY2xlUGFydHMsIGlzUG9zaXRpb25CZWZvcmUsIHJlcGFyc2VBcnRpY2xlUGFydHN9IGZyb20gJy4vY29yZSdcclxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXHJcblxyXG5pbnRlcmZhY2UgRWRpdG9yU2VsZWN0aW9uQ2hhbmdle1xyXG5cdGJlZ2luOiBFZGl0b3JQb3NpdGlvbixcclxuXHRlbmQ6IEVkaXRvclBvc2l0aW9uLFxyXG5cdHRleHQ6IHN0cmluZyxcclxuXHRzZWxlY3Rpb246IGJvb2xlYW4sXHJcblx0c2VsZWN0aW9uQW5jaG9yOiBFZGl0b3JQb3NpdGlvbixcclxuXHRzZWxlY3Rpb25IZWFkOiBFZGl0b3JQb3NpdGlvblxyXG59XHJcblxyXG5pbnRlcmZhY2UgUGFyc2VBcnRpY2xle1xyXG5cdGNoZWNrOiBib29sZWFuO1xyXG5cdGJlZ2luTGluZU51bWJlcjogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFYXN5VHlwaW5nUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5nczogRm9ybWF0U2V0dGluZ3M7XHJcblx0a2V5VXBkYXRlQ3Vyc29yOiBTZXQ8c3RyaW5nPjtcclxuXHRhcnRpY2xlUGFydHM6IEFydGljbGVQYXJ0W107XHJcblx0c2VsZWN0aW9uVGV4dENoYW5nZTogRWRpdG9yU2VsZWN0aW9uQ2hhbmdlfG51bGw7XHJcblx0cHJldkN1cnNvcjogRWRpdG9yUG9zaXRpb247XHJcblx0cmVwYXJzZUFydGljbGU6IFBhcnNlQXJ0aWNsZTtcclxuXHRlZGl0b3JDaGFuZ2VkOiBib29sZWFuO1xyXG5cclxuXHRzZWxlY3RlZFRleHQ6IHN0cmluZztcclxuXHRjaGFyQmVmb3JlQ3Vyc29yOiBzdHJpbmc7XHJcblx0Y2hhckFmdGVyQ3Vyc29yOiBzdHJpbmc7XHJcblx0a2V5RG93bkZsYWc6IGJvb2xlYW47XHJcblxyXG5cdGN0cmxEb3duTGluZUluZGV4OiBudW1iZXI7XHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMucHJldkN1cnNvciA9IHtsaW5lOjAsIGNoOjB9O1xyXG5cdFx0dGhpcy5zZWxlY3Rpb25UZXh0Q2hhbmdlID0gbnVsbDtcclxuXHRcdHRoaXMuZWRpdG9yQ2hhbmdlZCA9IGZhbHNlO1xyXG5cdFx0dGhpcy5rZXlVcGRhdGVDdXJzb3IgPSBuZXcgU2V0KFsnQXJyb3dVcCcsICdBcnJvd0Rvd24nLCAnQXJyb3dMZWZ0JywgJ0Fycm93UmlnaHQnXSk7XHJcblxyXG5cdFx0dGhpcy5hcnRpY2xlUGFydHMgPSBudWxsO1xyXG5cdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtcclxuXHRcdFx0Y2hlY2s6IHRydWUsXHJcblx0XHRcdGJlZ2luTGluZU51bWJlcjogMFxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLmtleURvd25GbGFnID0gZmFsc2U7XHJcblx0XHR0aGlzLnNlbGVjdGVkVGV4dCA9IFwiXCI7XHJcblx0XHR0aGlzLmNoYXJCZWZvcmVDdXJzb3IgPSBcIlwiO1xyXG5cdFx0dGhpcy5jaGFyQWZ0ZXJDdXJzb3IgPSBcIlwiO1xyXG5cdFx0dGhpcy5jdHJsRG93bkxpbmVJbmRleCA9IDA7XHJcblxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IFwiZWFzeS10eXBpbmctZm9ybWF0LXNlbGVjdGlvblwiLFxyXG5cdFx0XHRuYW1lOiBcImZvcm1hdCBzZWxlY3RlZCB0ZXh0XCIsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLmZvcm1hdFNlbGVjdGlvbigpLFxyXG5cdFx0XHRob3RrZXlzOiBbe1xyXG5cdFx0XHRcdG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXHJcblx0XHRcdFx0a2V5OiBcInNcIlxyXG5cdFx0XHR9XSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcImVhc3ktdHlwaW5nLWZvcm1hdC1zd2l0Y2hcIixcclxuXHRcdFx0bmFtZTogXCJzd2l0Y2ggYXV0b2Zvcm1hdFwiLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5zd2l0Y2hBdXRvRm9ybWF0dGluZygpLFxyXG5cdFx0XHRob3RrZXlzOiBbe1xyXG5cdFx0XHRcdG1vZGlmaWVyczogWydDdHJsJ10sXHJcblx0XHRcdFx0a2V5OiBcInRhYlwiXHJcblx0XHRcdH1dLFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgRWFzeVR5cGluZ1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItY2hhbmdlJywgdGhpcy5oYW5kbGVDaGFuZ2UpKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1wYXN0ZScsIHRoaXMuaGFuZGxlUGFzdGUpKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtb3BlbicsIHRoaXMuaGFuZGxlRmlsZU9wZW4pKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljaykpO1xyXG5cdFx0Ly8gdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbignYWN0aXZlLWxlYWYtY2hhbmdlJywgKGxlYWY6IFdvcmtzcGFjZUxlYWYpPT57XHJcblx0XHQvLyBcdGNvbnNvbGUubG9nKFwiPT09PmxlYWYgY2hhbmdlIVwiKTtcclxuXHRcdC8vIFx0Y29uc29sZS5sb2cobGVhZi5nZXREaXNwbGF5VGV4dCgpKTtcclxuXHRcdC8vIFx0Y29uc29sZS5sb2cobGVhZi52aWV3LmdldFZpZXdUeXBlKCkpO1xyXG5cdFx0Ly8gfSkpO1xyXG5cclxuXHRcdC8vIElmIHRoZSBwbHVnaW4gaG9va3MgdXAgYW55IGdsb2JhbCBET00gZXZlbnRzIChvbiBwYXJ0cyBvZiB0aGUgYXBwIHRoYXQgZG9lc24ndCBiZWxvbmcgdG8gdGhpcyBwbHVnaW4pXHJcblx0XHQvLyBVc2luZyB0aGlzIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyIHdoZW4gdGhpcyBwbHVnaW4gaXMgZGlzYWJsZWQuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdrZXl1cCcsIHRoaXMuaGFuZGxlS2V5dXApO1xyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5ZG93bilcclxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2JlZm9yZWlucHV0JywgdGhpcy5oYW5kbGVCZWZvcmVJbnB1dCk7XHJcblx0XHQvLyB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdzZWxlY3QnLCAoZXY6IEV2ZW50KT0+e2NvbnNvbGUubG9nKCdzZWxlY3QnKTsgdGhpcy5oYW5kbGVTZWxlY3QoZXYpO30pO1xyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAnc2VsZWN0aW9uY2hhbmdlJywgdGhpcy5oYW5kbGVTZWxlY3RCZWdpbik7XHJcblx0XHQvLyB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdjaGFuZ2UnLCAoZXY6IEV2ZW50KT0+e2NvbnNvbGUubG9nKCdDaGFuZ2U6JywgZXYpfSk7XHJcblxyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblxyXG5cdH1cclxuXHJcblx0Z2V0RWRpdG9yPSgpOkVkaXRvcnxudWxsPT5cclxuXHR7XHJcblx0XHRsZXQgZWRpdG9yID0gbnVsbDtcclxuXHRcdGxldCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0aWYobWFya2Rvd25WaWV3KVxyXG5cdFx0e1xyXG5cdFx0XHRlZGl0b3IgPSBtYXJrZG93blZpZXcuZWRpdG9yO1xyXG5cdFx0fVxyXG5cdFx0aWYoZWRpdG9yID09PSBudWxsICYmIHRoaXMuc2V0dGluZ3MuRGVidWcpIGNvbnNvbGUubG9nKCdjYW5cXCd0IGdldCBlZGl0b3InKTtcclxuXHRcdHJldHVybiBlZGl0b3I7XHJcblx0fVxyXG5cclxuXHRmb3JtYXRTZWxlY3Rpb24gPSAoKTp2b2lkPT5cclxuXHR7XHJcblx0XHRpZih0aGlzLnNldHRpbmdzLkRlYnVnKVxyXG5cdFx0e1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIkJlZ2luIGZvcm1hdCBTZWxlY3Rpb25cIik7XHJcblx0XHR9XHJcblx0XHRsZXQgZWRpdG9yID0gdGhpcy5nZXRFZGl0b3IoKTtcclxuXHRcdGlmKCFlZGl0b3IpIHJldHVybjtcclxuXHJcblx0XHRpZighZWRpdG9yLnNvbWV0aGluZ1NlbGVjdGVkKCkgfHwgZWRpdG9yLmdldFNlbGVjdGlvbigpPT09JycpIHJldHVybjtcclxuXHJcblx0XHRsZXQgc2VsZWN0aW9uID0gZWRpdG9yLmxpc3RTZWxlY3Rpb25zKClbMF07XHJcblx0XHRsZXQgbGluZUJlZ2luUmVwYXJzZSA9IHNlbGVjdGlvbi5hbmNob3IubGluZTtcclxuXHRcdGlmKGxpbmVCZWdpblJlcGFyc2U+c2VsZWN0aW9uLmhlYWQubGluZSlcclxuXHRcdHtcclxuXHRcdFx0bGluZUJlZ2luUmVwYXJzZSA9IHNlbGVjdGlvbi5oZWFkLmxpbmU7XHJcblx0XHR9XHJcblx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6bGluZUJlZ2luUmVwYXJzZX07XHJcblxyXG5cdFx0bGV0IHNlbGVjdGVkQXJ0aWNsZSA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcclxuXHRcdGxldCBhcnRpY2xlUGFydHMgPSBzcGxpdEFydGljbGUoc2VsZWN0ZWRBcnRpY2xlKTtcclxuXHRcdGxldCBsaW5lcyA9IHNlbGVjdGVkQXJ0aWNsZS5zcGxpdCgnXFxuJyk7XHJcblx0XHRsZXQgcmVzdWx0ID0gXCJcIjtcclxuXHRcdGZvcihsZXQgaT0wOyBpPGFydGljbGVQYXJ0cy5sZW5ndGg7IGkrKylcclxuXHRcdHtcclxuXHRcdFx0aWYoYXJ0aWNsZVBhcnRzW2ldLnR5cGUhPUxpbmVUeXBlLnRleHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaj1hcnRpY2xlUGFydHNbaV0uYmVnaW47IGo8YXJ0aWNsZVBhcnRzW2ldLmVuZDtqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBsaW5lc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gbGluZSArICdcXG4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0e1xyXG5cdFx0XHRcdC8vIFx1NUJGOVx1NkJDRlx1ODg0Q1x1OEZEQlx1ODg0Q1x1NjgzQ1x1NUYwRlx1NTMxNlxyXG5cdFx0XHRcdGZvcihsZXQgaj1hcnRpY2xlUGFydHNbaV0uYmVnaW47IGo8YXJ0aWNsZVBhcnRzW2ldLmVuZDtqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBsaW5lc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3bGluZSA9IGZvcm1hdExpbmUobGluZSwge2xpbmU6MCwgY2g6bGluZS5sZW5ndGh9LCB0aGlzLnNldHRpbmdzKVswXTtcclxuXHRcdFx0XHRcdHJlc3VsdCArPSBuZXdsaW5lICsgJ1xcbic7XHJcbiAgICAgICAgICAgICAgICB9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJlc3VsdCA9IHJlc3VsdC5zdWJzdHJpbmcoMCwgcmVzdWx0Lmxlbmd0aC0xKTtcclxuXHRcdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHJlc3VsdCk7XHJcblx0XHR0aGlzLnVwZGF0ZUFydGljbGVQYXJ0cyhlZGl0b3IpO1xyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuXHRcdHtcclxuXHRcdFx0bmV3IE5vdGljZShcIkZvcm1hdCBTZWxlY3Rpb24gRG9uZSFcIik7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiRW5kIGZvcm1hdCBTZWxlY3Rpb25cIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzd2l0Y2hBdXRvRm9ybWF0dGluZygpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5BdXRvRm9ybWF0dGluZyA9IHRoaXMuc2V0dGluZ3MuQXV0b0Zvcm1hdHRpbmc/IGZhbHNlOnRydWU7XHJcbiAgICAgICAgbGV0IHN0YXR1cyA9IHRoaXMuc2V0dGluZ3MuQXV0b0Zvcm1hdHRpbmc/J29uJzonb2ZmJztcclxuICAgICAgICBuZXcgTm90aWNlKCdBdXRvZm9ybWF0IGlzICcrIHN0YXR1cyArJyEnKTtcclxuICAgIH1cclxuXHJcblx0aGFuZGxlQmVmb3JlSW5wdXQ9KGV2OiBJbnB1dEV2ZW50KTp2b2lkPT5cclxuXHR7XHJcblx0XHRpZih0aGlzLnNldHRpbmdzLkRlYnVnKSBjb25zb2xlLmxvZyhcIj09PT4gQmVmb3JlIElucHV0XCIpO1xyXG5cdFx0aWYoIXRoaXMuc2V0dGluZ3MuRnVsbFdpZHRoQ2hhcmFjdGVyRW5oYW5jZSkgcmV0dXJuO1xyXG5cdFx0bGV0IGVkaXRvciA9IHRoaXMuZ2V0RWRpdG9yKCk7XHJcblx0XHRpZighZWRpdG9yKSByZXR1cm47XHJcblxyXG5cdFx0Ly8gb2JzaWRpYW4gXHU1NzI4IGxpdmUgcHJldmlldyBcdTZBMjFcdTVGMEZcdTRFMEJcdTRGMUFcdTY3MDlcdTk1MTlcdThCRUZcdTkwMDlcdTRFMkRcdTUzM0FcdTU3REZcdTc2ODQgQnVnXHJcblx0XHRsZXQgc3BlY2lhbENoYXIgPSBuZXcgU2V0KFsnXHUzMDEwJywgJ1x1MzAxMScsJ1x1MDBCNycsICc9JywgJ1x1MjAxQycsICdcdTIwMUQnLCAnXHUzMDBBJywgJ1x1MzAwQicsICdcdTIwMTgnLCAnXHUyMDE5JywgJ1x1RkYwOCcsICdcdUZGMDknLCAnXHVGRkU1J10pO1xyXG5cclxuXHRcdGlmKGVkaXRvci5zb21ldGhpbmdTZWxlY3RlZCgpICYmIGVkaXRvci5nZXRTZWxlY3Rpb24oKSE9XCJcIil7XHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKCdCZWZvcmUgQ2hhbmdlIFNlbGVjdGlvbjonLCBlZGl0b3IuZ2V0U2VsZWN0aW9uKCksIFwiXHU2NkZGXHU2MzYyXHU1MTg1XHU1QkI5XCIsZXYuZGF0YSk7XHJcblx0XHRcdGlmKGV2LmRhdGEubGVuZ3RoIT0xIHx8IHNwZWNpYWxDaGFyLmhhcyhlZGl0b3IuZ2V0U2VsZWN0aW9uKCkpKSByZXR1cm47XHJcblxyXG5cdFx0XHRsZXQgc2VsZWN0ZWRGb3JtYXRSYW5nZSA9IGVkaXRvci5saXN0U2VsZWN0aW9ucygpWzBdO1xyXG5cdFx0XHRsZXQgYmVnaW46IEVkaXRvclBvc2l0aW9uO1xyXG5cdFx0XHRsZXQgZW5kOiBFZGl0b3JQb3NpdGlvbjtcclxuXHRcdFx0bGV0IGFuY2hvcjogRWRpdG9yUG9zaXRpb247XHJcblx0XHRcdGxldCBoZWFkOiBFZGl0b3JQb3NpdGlvbjtcclxuXHRcdFx0aWYoaXNQb3NpdGlvbkJlZm9yZShzZWxlY3RlZEZvcm1hdFJhbmdlLmFuY2hvciwgc2VsZWN0ZWRGb3JtYXRSYW5nZS5oZWFkKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGJlZ2luID0gc2VsZWN0ZWRGb3JtYXRSYW5nZS5hbmNob3I7XHJcblx0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZXtcclxuXHRcdFx0XHRiZWdpbiA9IHNlbGVjdGVkRm9ybWF0UmFuZ2UuaGVhZDtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbmQgPSB7bGluZTogYmVnaW4ubGluZSwgY2g6IGJlZ2luLmNoKzF9O1xyXG5cdFx0XHRhbmNob3IgPSB7bGluZTogc2VsZWN0ZWRGb3JtYXRSYW5nZS5hbmNob3IubGluZSwgY2g6IHNlbGVjdGVkRm9ybWF0UmFuZ2UuYW5jaG9yLmNoKzF9O1xyXG5cdFx0XHRoZWFkID0ge2xpbmU6IHNlbGVjdGVkRm9ybWF0UmFuZ2UuaGVhZC5saW5lLCBjaDogc2VsZWN0ZWRGb3JtYXRSYW5nZS5oZWFkLmNoKzF9O1xyXG5cclxuXHRcdFx0bGV0IHRleHQ6IHN0cmluZztcclxuXHRcdFx0c3dpdGNoKGV2LmRhdGEpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjYXNlICdcdTMwMTAnOlxyXG5cdFx0XHRcdGNhc2UgJ1x1MzAxMSc6XHJcblx0XHRcdFx0XHR0ZXh0ID0gXCJbXCIrZWRpdG9yLmdldFNlbGVjdGlvbigpK1wiXVwiO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnXHUwMEI3JzpcclxuXHRcdFx0XHRcdHRleHQgPSBcImBcIitlZGl0b3IuZ2V0U2VsZWN0aW9uKCkrXCJgXCI7XHJcblx0XHRcdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlLmNoZWNrID0gdHJ1ZTtcclxuXHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUuYmVnaW5MaW5lTnVtYmVyID0gYmVnaW4ubGluZVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnXHVGRkU1JzpcclxuXHRcdFx0XHRjYXNlICdcdTAwQTUnOlxyXG5cdFx0XHRcdFx0dGV4dCA9IFwiJFwiK2VkaXRvci5nZXRTZWxlY3Rpb24oKStcIiRcIjtcclxuXHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUuY2hlY2sgPSB0cnVlO1xyXG5cdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZS5iZWdpbkxpbmVOdW1iZXIgPSBiZWdpbi5saW5lXHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdcdTIwMUMnOlxyXG5cdFx0XHRcdGNhc2UgJ1x1MjAxRCc6XHJcblx0XHRcdFx0XHR0ZXh0ID0gXCJcdTIwMUNcIitlZGl0b3IuZ2V0U2VsZWN0aW9uKCkrXCJcdTIwMURcIjtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ1x1MjAxOCc6XHJcblx0XHRcdFx0Y2FzZSAnXHUyMDE5JzpcclxuXHRcdFx0XHRcdHRleHQgPSAnXHUyMDE4JytlZGl0b3IuZ2V0U2VsZWN0aW9uKCkrJ1x1MjAxOSc7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdcdTMwMEEnOlxyXG5cdFx0XHRcdGNhc2UgJ1x1MzAwQic6XHJcblx0XHRcdFx0XHR0ZXh0ID0gJ1x1MzAwQScrZWRpdG9yLmdldFNlbGVjdGlvbigpKydcdTMwMEInO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdcdUZGMDgnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnXHVGRjA5JzpcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiSSBhbSBoZXJlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dCA9ICdcdUZGMDgnK2VkaXRvci5nZXRTZWxlY3Rpb24oKSsnXHVGRjA5JztcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAneyc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICd9JzpcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gJ3snK2VkaXRvci5nZXRTZWxlY3Rpb24oKSsnfSc7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0dGhpcy5wcmV2Q3Vyc29yID0gYmVnaW47XHJcblx0XHRcdFx0XHRsZXQgcmVnUmVwYXJzZSA9IC9eW1xcLVxcJFxcYF18W1xcLVxcJFxcYF1cXHMqJHxcXG4vbTtcclxuXHRcdFx0XHRcdGxldCByZWcgPSAvWy1cXGBcXCRdLztcclxuXHRcdFx0XHRcdGlmKHJlZ1JlcGFyc2UudGVzdChlZGl0b3IuZ2V0U2VsZWN0aW9uKCkpIHx8IHJlZy50ZXN0KGV2LmRhdGEpKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlLmNoZWNrID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZS5iZWdpbkxpbmVOdW1iZXIgPSBiZWdpbi5saW5lXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UgPSBudWxsO1x0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5zZWxlY3Rpb25UZXh0Q2hhbmdlID0ge1xyXG5cdFx0XHRcdGJlZ2luOiBiZWdpbixcclxuXHRcdFx0XHRlbmQ6IGVuZCxcclxuXHRcdFx0XHR0ZXh0OiB0ZXh0LFxyXG5cdFx0XHRcdHNlbGVjdGlvbjogdHJ1ZSxcclxuXHRcdFx0XHRzZWxlY3Rpb25BbmNob3I6YW5jaG9yLFxyXG5cdFx0XHRcdHNlbGVjdGlvbkhlYWQ6IGhlYWRcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aGFuZGxlS2V5ZG93bj0oZXZ0OiBLZXlib2FyZEV2ZW50KTp2b2lkPT5cclxuXHR7XHJcblx0XHQvLyBjb25zb2xlLmxvZygna2V5IGRvd24nLCBldnQua2V5LCBldnQuY3RybEtleSwgZXZ0LnNoaWZ0S2V5KTtcclxuXHRcdGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PScpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdrZXlkb3duOicsIGV2dC5rZXkpO1xyXG4gICAgICAgIH1cclxuXHJcblx0XHRsZXQgZWRpdG9yID0gdGhpcy5nZXRFZGl0b3IoKTtcclxuXHRcdGlmKCFlZGl0b3IpIHJldHVybjtcclxuXHRcdHRoaXMua2V5RG93bkZsYWcgPSB0cnVlO1xyXG5cdFx0aWYoZXZ0LmtleSA9PT0gJ0NvbnRyb2wnKSB0aGlzLmN0cmxEb3duTGluZUluZGV4ID0gZWRpdG9yLmdldEN1cnNvcigpLmxpbmU7XHJcblx0XHQvLyBjb25zb2xlLmxvZygndGV4dCBhZnRlciBrZXkgZG93bjonLCBlZGl0b3IuZ2V0TGluZShlZGl0b3IuZ2V0Q3Vyc29yKCkubGluZSkpO1xyXG5cdH1cclxuXHRcclxuXHRoYW5kbGVLZXl1cD0oZXZ0OiBLZXlib2FyZEV2ZW50KTp2b2lkPT5cclxuXHR7XHJcblx0XHRpZih0aGlzLnNldHRpbmdzLkRlYnVnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJz09PT09PT09PT09PT09PT09PT09PT09PT0nKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygna2V5dXA6JywgZXZ0LmtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdGxldCBlZGl0b3IgPSB0aGlzLmdldEVkaXRvcigpO1xyXG5cdFx0aWYoIWVkaXRvcikgcmV0dXJuO1xyXG5cdFx0dGhpcy5rZXlEb3duRmxhZyA9IGZhbHNlO1xyXG5cclxuXHRcdGlmKGV2dC5rZXkgPT09ICdQcm9jZXNzJylcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFx1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NzY4NFx1NjU4N1x1NjcyQ1x1RkYwQ1x1NzUyOFx1NEU4RVx1NTQwRVx1N0VFRFx1NTIyMFx1OTY2NFx1OTUyRVx1ODlFNlx1NTNEMVx1NjVGNlx1NTIyNFx1NjVBRFx1NjYyRlx1NTQyNlx1OTcwMFx1ODk4MVx1OTFDRFx1NjVCMFx1ODlFM1x1Njc5MFx1NjU4N1x1NjcyQ1xyXG5cdFx0aWYoZXZ0LmtleSE9J0JhY2tzcGFjZScgJiYgZXZ0LmtleSE9J0VudGVyJyAmJiBldnQua2V5IT0nRGVsZXRlJylcclxuXHRcdHtcclxuXHRcdFx0dGhpcy51cGRhdGVTZWxlY3Rpb24oZWRpdG9yKTtcclxuXHRcdH1cclxuXHRcdC8vIGlmKHRoaXMua2V5VXBkYXRlQ3Vyc29yLmhhcyhldnQua2V5KSlcdFx0XHJcblxyXG5cdFx0Ly8gXHU1OTA0XHU3NDA2XHU5MDA5XHU0RTJEXHU2NTg3XHU2NzJDXHU3Njg0XHU2MEM1XHU1MUI1XHU0RTBCXHU2MzA5XHU5NTJFXHU0RjdGXHU3NTI4XHU3Mjc5XHU1QjlBXHU3Njg0XHU1MTY4XHU4OUQyXHU3QjI2XHU1M0Y3XHJcblx0XHRpZih0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UgJiYgdGhpcy5zZXR0aW5ncy5BdXRvRm9ybWF0dGluZylcclxuXHRcdHtcclxuXHRcdFx0ZWRpdG9yLnJlcGxhY2VSYW5nZSh0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UudGV4dCwgdGhpcy5zZWxlY3Rpb25UZXh0Q2hhbmdlLmJlZ2luLCB0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UuZW5kKTtcclxuXHRcdFx0ZWRpdG9yLnNldFNlbGVjdGlvbih0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2Uuc2VsZWN0aW9uQW5jaG9yLCB0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2Uuc2VsZWN0aW9uSGVhZCk7XHJcblx0XHRcdHRoaXMucHJldkN1cnNvciA9IHRoaXMuc2VsZWN0aW9uVGV4dENoYW5nZS5zZWxlY3Rpb25IZWFkO1xyXG5cdFx0XHR0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UgPSBudWxsO1xyXG5cdFx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5zZWxlY3Rpb25UZXh0Q2hhbmdlID0gbnVsbDtcclxuXHRcdFxyXG5cdFx0Ly8gXHU1NzI4XHU0RUU1XHU0RTBCXHU2MEM1XHU1MUI1XHU0RTBCXHU2M0QyXHU0RUY2XHU0RTBEXHU1NENEXHU1RTk0XHJcblx0XHRpZighdGhpcy5lZGl0b3JDaGFuZ2VkIHx8IHRoaXMuc2V0dGluZ3MuQXV0b0Zvcm1hdHRpbmc9PT1mYWxzZSlcclxuXHRcdHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFx1NTkwNFx1NzQwNlx1NjRBNFx1NTZERVx1MzAwMVx1NTNDRFx1NjRBNFx1NTZERVx1NTQ4Q1x1NTI2QVx1NTIwN1x1RkYwQ1x1OTcwMFx1ODk4MVx1OTFDRFx1NjVCMFx1ODlFM1x1Njc5MFx1NjU4N1x1Njg2M1xyXG5cdFx0aWYoZXZ0LmN0cmxLZXkgJiYgKGV2dC5rZXk9PT0neicgfHwgZXZ0LmtleT09PSd5JyB8fCBldnQua2V5PT09J3gnKSlcclxuXHRcdHtcclxuXHRcdFx0bGV0IGxpbmVSZXBhcnNlQmVnaW4gPSBlZGl0b3IuZ2V0Q3Vyc29yKCkubGluZTtcclxuXHRcdFx0aWYobGluZVJlcGFyc2VCZWdpbj50aGlzLmN0cmxEb3duTGluZUluZGV4KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0bGluZVJlcGFyc2VCZWdpbiA9IHRoaXMuY3RybERvd25MaW5lSW5kZXg7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtjaGVjazogdHJ1ZSwgYmVnaW5MaW5lTnVtYmVyOiBsaW5lUmVwYXJzZUJlZ2lufTtcclxuXHRcdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdFx0dGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coJ3JlcGFyc2UgYmVnaW46JywgbGluZVJlcGFyc2VCZWdpbik7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBcdTUyMjBcdTk2NjRcdTY1ODdcdTY3MkNcdTU0MEVcdTk3MDBcdTg5ODFcdTkxQ0RcdTY1QjBcdTg5RTNcdTY3OTBcdTY1ODdcdTY3MkNcclxuXHRcdGxldCByZWdUZXN0UmVwYXJzZSA9IC9eW1xcLVxcJGBdfFtcXC1cXCRcXGBdXFxzKiR8XFxufFxcJFxcJHwtLS18YGBgL2dtO1xyXG5cdFx0Ly8gbGV0IHNldFRlc3RSZXBhcnNlID0gbmV3IFNldChbJ1xcbicsICctJywgJyQnLCAnYCddKTtcclxuXHRcdHN3aXRjaChldnQua2V5KVxyXG5cdFx0e1xyXG5cdFx0XHRjYXNlICdCYWNrc3BhY2UnOlxyXG5cdFx0XHRcdGlmKCh0aGlzLnNlbGVjdGVkVGV4dCE9XCJcIiAmJiAhcmVnVGVzdFJlcGFyc2UudGVzdCh0aGlzLnNlbGVjdGVkVGV4dCkpIHx8IFxyXG5cdFx0XHRcdCAgICAodGhpcy5zZWxlY3RlZFRleHQ9PT1cIlwiICYmICFyZWdUZXN0UmVwYXJzZS50ZXN0KHRoaXMuY2hhckJlZm9yZUN1cnNvcikpKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUuY2hlY2sgPSBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZXtcclxuXHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUgPSB7Y2hlY2s6IHRydWUsIGJlZ2luTGluZU51bWJlcjplZGl0b3IuZ2V0Q3Vyc29yKCkubGluZX07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uKGVkaXRvcik7XHJcblx0XHRcdFx0dGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHRcdHRoaXMuZWRpdG9yQ2hhbmdlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMudXBkYXRlQXJ0aWNsZVBhcnRzKGVkaXRvcik7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRjYXNlICdEZWxldGUnOlxyXG5cdFx0XHRcdGlmKCh0aGlzLnNlbGVjdGVkVGV4dCE9XCJcIiAmJiAhcmVnVGVzdFJlcGFyc2UudGVzdCh0aGlzLnNlbGVjdGVkVGV4dCkpIHx8IFxyXG5cdFx0XHRcdCAgICAodGhpcy5zZWxlY3RlZFRleHQ9PT1cIlwiICYmICFyZWdUZXN0UmVwYXJzZS50ZXN0KHRoaXMuY2hhckFmdGVyQ3Vyc29yKSkpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZS5jaGVjayA9IGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNle1xyXG5cdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtjaGVjazogdHJ1ZSwgYmVnaW5MaW5lTnVtYmVyOmVkaXRvci5nZXRDdXJzb3IoKS5saW5lfTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy51cGRhdGVTZWxlY3Rpb24oZWRpdG9yKTtcclxuXHRcdFx0XHR0aGlzLnByZXZDdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHRcdFx0dGhpcy5lZGl0b3JDaGFuZ2VkID0gZmFsc2U7XHJcblx0XHRcdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdGNhc2UgJ0VudGVyJzpcclxuXHRcdFx0XHRsZXQgcHJldkxpbmVJbmRleCA9IGVkaXRvci5nZXRDdXJzb3IoKS5saW5lLTE7XHJcblx0XHRcdFx0cHJldkxpbmVJbmRleCA9IHByZXZMaW5lSW5kZXg+MD9wcmV2TGluZUluZGV4OjA7XHJcblx0XHRcdFx0aWYoIWV2dC5jdHJsS2V5KSB0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6ZWRpdG9yLmdldEN1cnNvcigpLmxpbmUtMX07XHJcblx0XHRcdFx0Ly8vaWYgZ2V0IG5ldyBsaW5lLCBmb3JtYXQgUHJldiBsaW5lXHJcblx0XHRcdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdFx0XHRpZih0aGlzLmlzVGV4dFBhcnQocHJldkxpbmVJbmRleCkpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0bGV0IHByZXZMaW5lRW5kQ3Vyc29yID0ge2xpbmU6IHByZXZMaW5lSW5kZXgsIGNoOiBlZGl0b3IuZ2V0TGluZShwcmV2TGluZUluZGV4KS5sZW5ndGh9XHRcdFx0XHRcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlTGluZShlZGl0b3IsIHByZXZMaW5lSW5kZXgsIHByZXZMaW5lRW5kQ3Vyc29yLCB0aGlzLnNldHRpbmdzLCBwcmV2TGluZUVuZEN1cnNvciwgZWRpdG9yLmdldEN1cnNvcigpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy51cGRhdGVTZWxlY3Rpb24oZWRpdG9yKTtcclxuXHRcdFx0XHR0aGlzLnByZXZDdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHRcdFx0dGhpcy5lZGl0b3JDaGFuZ2VkID0gZmFsc2U7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRsZXQgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0Ly8gXHU1RjUzXHU1MTQ5XHU2ODA3XHU1MjREXHU1MUUwXHU0RTJBXHU1QjU3XHU3QjI2XHU0RTNBIFwiJCRcIiAvIFwiYGBgXCIgLyBcIi0tLVwiIFx1NjVGNlx1RkYwQ1x1NEVDRVx1NUY1M1x1NTI0RFx1ODg0Q1x1OTFDRFx1NjVCMFx1ODlFM1x1Njc5MFx1NTE2OFx1NjU4N1xyXG5cdFx0e1xyXG5cdFx0XHRcclxuXHRcdFx0bGV0IHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPSBlZGl0b3IuZ2V0UmFuZ2UoXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICApO1xyXG5cdFx0XHRsZXQgdGhyZWVDaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID0gZWRpdG9yLmdldFJhbmdlKFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtM30sXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgKTtcclxuXHJcblx0XHRcdGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09IFwiJCRcIiB8fCB0aHJlZUNoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09IFwiYGBgXCIgfHwgdGhyZWVDaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID09IFwiLS0tXCIpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6IGN1cnNvci5saW5lfTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFx1NEUyRFx1NjU4N1x1NTE2OFx1ODlEMlx1N0IyNlx1NTNGN1x1OEZERVx1N0VFRFx1OEY5M1x1NTE2NVx1NTg5RVx1NUYzQVx1NTI5Rlx1ODBGRFxyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5GdWxsV2lkdGhDaGFyYWN0ZXJFbmhhbmNlICYmICFlZGl0b3Iuc29tZXRoaW5nU2VsZWN0ZWQoKSlcclxuICAgICAgICB7XHJcblx0XHRcdFxyXG4gICAgICAgICAgICBsZXQgdHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9IGVkaXRvci5nZXRSYW5nZShcclxuXHRcdFx0XHR7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuXHRcdFx0XHR7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuXHRcdFx0KTtcclxuXHRcdFx0bGV0IGNoYXJCZWZvcmVDdXJzb3IgPSBlZGl0b3IuZ2V0UmFuZ2UoXHJcblx0XHRcdFx0e2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0sXHJcblx0XHRcdFx0e2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcblx0XHRcdCk7XHJcbiAgICAgICAgICAgIC8vIGxldCB0d29DaGFyYWN0ZXJzTmVhckN1cnNvciA9IGVkaXRvci5nZXRSYW5nZShcclxuICAgICAgICAgICAgLy8gICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9LFxyXG4gICAgICAgICAgICAvLyAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2grMX1cclxuICAgICAgICAgICAgLy8gKTtcclxuICAgICAgICAgICAgbGV0IGNoYXJhY3RlcjJjdXJzb3IxID0gZWRpdG9yLmdldFJhbmdlKFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaCsxfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBsZXQgdHdvQ2hhcmFjdGVyc0FmdGVyQ3Vyc29yID0gZWRpdG9yLmdldFJhbmdlKFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9LFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2grMn1cclxuICAgICAgICAgICAgKTtcclxuXHRcdFx0XHJcbiAgICAgICAgICAgIHN3aXRjaChldnQua2V5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICckJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1RkZFNSc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdcdTAwQTUnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdUZGRTVcdUZGRTUnIHx8IHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdTAwQTVcdTAwQTUnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICckJCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtjaGVjazogdHJ1ZSwgYmVnaW5MaW5lTnVtYmVyOmN1cnNvci5saW5lfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblx0XHRcdFx0XHRlbHNlIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICckJCcpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6Y3Vyc29yLmxpbmV9O1xyXG5cdFx0XHRcdFx0fVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoY2hhcmFjdGVyMmN1cnNvcjE9PT0nJFx1RkZFNSQnIHx8IGNoYXJhY3RlcjJjdXJzb3IxPT09JyRcdTAwQTUkJylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJCQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcihjdXJzb3IpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6Y3Vyc29yLmxpbmV9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2FzZSAnWyc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdcdTMwMTAnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdbWycgJiYgdHdvQ2hhcmFjdGVyc0FmdGVyQ3Vyc29yIT0nXV0nICYmIWVkaXRvci5zb21ldGhpbmdTZWxlY3RlZCgpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdbW11dJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3IoY3Vyc29yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2AnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnXHUwMEI3JzpcclxuICAgICAgICAgICAgICAgICAgICBpZih0d29DaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID09PSAnXHUwMEI3XHUwMEI3JylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYGAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUgPSB7Y2hlY2s6IHRydWUsIGJlZ2luTGluZU51bWJlcjpjdXJzb3IubGluZX07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoY2hhcmFjdGVyMmN1cnNvcjE9PT0nYFx1MDBCN2AnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2grMX0pO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6Y3Vyc29yLmxpbmV9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1RkYxQSc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICc6JzpcclxuICAgICAgICAgICAgICAgICAgICBpZih0d29DaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID09PSAnXHVGRjFBXHVGRjFBJylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnOicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBgLGA6XHJcblx0XHRcdFx0Y2FzZSBgXHVGRjBDYDpcclxuXHRcdFx0XHRcdGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdUZGMENcdUZGMEMnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcsJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1MzAwMSc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICcvJzpcclxuXHRcdFx0XHRcdGlmKGN1cnNvci5jaD09PTEgJiYgY2hhckJlZm9yZUN1cnNvcj09PSdcdTMwMDEnKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuXHRcdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdTMwMDFcdTMwMDEnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcvJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1MzAwMic6XHJcbiAgICAgICAgICAgICAgICBjYXNlICcuJzpcclxuICAgICAgICAgICAgICAgICAgICBpZih0d29DaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID09PSAnXHUzMDAyXHUzMDAyJylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBgO2A6XHJcblx0XHRcdFx0Y2FzZSBgXHVGRjFCYDpcclxuXHRcdFx0XHRcdGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdUZGMUJcdUZGMUInKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc7JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJygnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnXHVGRjA4JzpcclxuICAgICAgICAgICAgICAgICAgICBpZih0d29DaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID09PSAnXHVGRjA4XHVGRjA4JylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKCknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnXHUzMDBCJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJz4nOlxyXG5cdFx0XHRcdFx0aWYoY3Vyc29yLmNoPT09MSAmJiBjaGFyQmVmb3JlQ3Vyc29yPT09J1x1MzAwQicpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cdFx0XHRcdFx0fVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1MzAwQlx1MzAwQicpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJz4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cdFx0XHRcdFx0ZWxzZSBpZih0d29DaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID09PSAnPlx1MzAwQicpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKGN1cnNvcik7XHJcblx0XHRcdFx0XHR9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICc8JzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1MzAwQSc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1MzAwQVx1MzAwQScpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJyEnOlxyXG5cdFx0XHRcdGNhc2UgJ1x1RkYwMSc6XHJcblx0XHRcdFx0XHRpZih0d29DaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID09PSAnXHVGRjAxXHVGRjAxJylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnfCc6XHJcblx0XHRcdFx0Y2FzZSAnXHVGRjVDJzpcclxuXHRcdFx0XHRcdGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdUZGNUNcdUZGNUMnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd8JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblx0XHRjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHR0aGlzLnVwZGF0ZVNlbGVjdGlvbihlZGl0b3IpO1xyXG5cclxuXHRcdC8vIFx1OTFDRFx1NjVCMFx1ODlFM1x1Njc5MFx1NTE2OFx1NjU4N1xyXG5cdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHJcblx0XHQvLyBcdTU3MjhcdTk3NUVcdTY1ODdcdTY3MkNcdTg4NENcdTdGMTZcdThGOTFcdTY1RjZcdUZGMENcdTY1RTBcdTk3MDBcdTY4M0NcdTVGMEZcdTUzMTZcclxuXHRcdGlmKGdldExpbmVUeXBlRnJvbUFydGljbGVQYXJ0cyhjdXJzb3IubGluZSwgdGhpcy5hcnRpY2xlUGFydHMpICE9TGluZVR5cGUudGV4dClcclxuXHRcdHtcclxuXHRcdFx0dGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tXHU1QkY5XHU2NTg3XHU2NzJDXHU4RkRCXHU4ODRDXHU2ODNDXHU1RjBGXHU1MzE2LS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHR0aGlzLnVwZGF0ZUxpbmUoZWRpdG9yLCBjdXJzb3IubGluZSwgY3Vyc29yLCB0aGlzLnNldHRpbmdzLCB0aGlzLnByZXZDdXJzb3IpO1xyXG5cdFx0dGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0dGhpcy5lZGl0b3JDaGFuZ2VkID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRpc1RleHRQYXJ0PShsaW5lSW5kZXg6bnVtYmVyKTpib29sZWFuPT5cclxuXHR7XHJcblx0XHRpZihnZXRMaW5lVHlwZUZyb21BcnRpY2xlUGFydHMobGluZUluZGV4LCB0aGlzLmFydGljbGVQYXJ0cykgPT09IExpbmVUeXBlLnRleHQpXHJcblx0XHR7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0aGFuZGxlQ2xpY2s9KCk9PlxyXG5cdHtcclxuXHRcdGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpIGNvbnNvbGUubG9nKCc9PT0+Q2xpY2sgZXZlbnQgdHJpZ2dlcmVkJyk7XHJcblx0XHRsZXQgZWRpdG9yID0gdGhpcy5nZXRFZGl0b3IoKTtcclxuXHRcdGlmKCFlZGl0b3IpIHJldHVybjtcclxuXHRcdHRoaXMucHJldkN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuXHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uKGVkaXRvcik7XHJcblx0fVxyXG5cclxuXHRoYW5kbGVGaWxlT3Blbj0oZmlsZTogVEZpbGUgfCBudWxsKTp2b2lkPT5cclxuXHR7XHJcblx0XHRpZihmaWxlIT1udWxsKVxyXG5cdFx0e1xyXG5cdFx0XHRpZih0aGlzLnNldHRpbmdzLkRlYnVnKSBjb25zb2xlLmxvZyhcIj09PT5GaWxlIG9wZW46XCIsIGZpbGUudmF1bHQuZ2V0TmFtZSgpKycvJytmaWxlLnBhdGgpO1xyXG5cdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6IDB9O1xyXG5cdFx0XHR0aGlzLmFydGljbGVQYXJ0cyA9IG51bGw7XHJcblx0XHR9XHJcblx0XHRcclxuXHR9XHJcblxyXG5cdGhhbmRsZVBhc3RlPShldnQ6IENsaXBib2FyZEV2ZW50LCBlZGl0b3I6IEVkaXRvciwgbWFya2Rvd25WaWV3OiBNYXJrZG93blZpZXcpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdGxldCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHRpZih0aGlzLnNldHRpbmdzLkRlYnVnKVxyXG5cdFx0e1xyXG5cdFx0XHRjb25zb2xlLmxvZygnPT09PkJlZm9yZS1QYXN0ZScpO1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyhlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSkpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtjaGVjazogdHJ1ZSwgYmVnaW5MaW5lTnVtYmVyOiBjdXJzb3IubGluZX07XHJcblx0XHR0aGlzLnVwZGF0ZUFydGljbGVQYXJ0cyhlZGl0b3IpO1xyXG5cdH1cclxuXHJcblx0aGFuZGxlQ2hhbmdlPShlZGl0b3I6IEVkaXRvciwgbWFya2Rvd25WaWV3OiBNYXJrZG93blZpZXcpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpXHJcblx0XHR7XHJcblx0XHRcdGNvbnNvbGUubG9nKCc9PT0+Q2hhbmdlIEV2ZW50Jyk7XHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKGVkaXRvci5nZXRMaW5lKGVkaXRvci5nZXRDdXJzb3IoKS5saW5lKSk7XHJcblx0XHR9XHRcdFxyXG5cdFx0dGhpcy5lZGl0b3JDaGFuZ2VkID0gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdGhhbmRsZVNlbGVjdEJlZ2luPShldjogRXZlbnQpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdGlmKHRoaXMua2V5RG93bkZsYWcpIHJldHVybjtcclxuXHRcdGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpXHJcblx0XHR7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiPT09PlNlbGVjdCBFdmVudFwiKTtcclxuXHRcdH1cclxuXHRcdGxldCBlZGl0b3IgPSB0aGlzLmdldEVkaXRvcigpO1xyXG5cdFx0aWYoIWVkaXRvcikgcmV0dXJuO1xyXG5cdFx0dGhpcy51cGRhdGVTZWxlY3Rpb24oZWRpdG9yKTtcclxuXHR9XHJcblxyXG5cdHVwZGF0ZUFydGljbGVQYXJ0cz0oZWRpdG9yOiBFZGl0b3IpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdGlmKHRoaXMucmVwYXJzZUFydGljbGUuY2hlY2sgfHwgdGhpcy5hcnRpY2xlUGFydHMgPT09IG51bGwpXHJcblx0XHR7XHJcblx0XHRcdHRoaXMuYXJ0aWNsZVBhcnRzID0gcmVwYXJzZUFydGljbGVQYXJ0cyhlZGl0b3IuZ2V0VmFsdWUoKSwgdGhpcy5hcnRpY2xlUGFydHMsIHRoaXMucmVwYXJzZUFydGljbGUuYmVnaW5MaW5lTnVtYmVyLCB0aGlzLnNldHRpbmdzLkRlYnVnKTtcclxuXHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZS5jaGVjayA9IGZhbHNlO1xyXG5cdFx0XHQvLyBpZih0aGlzLnNldHRpbmdzLkRlYnVnKSB0aGlzLnByaW50QXJ0aWNsZVBhcnRzKGVkaXRvcik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcmludEFydGljbGVQYXJ0cz0oZWRpdG9yOiBFZGl0b3IpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdGxldCBhcnRpY2xlID0gZWRpdG9yLmdldFZhbHVlKCk7XHJcblx0XHRsZXQgbGluZXMgPSBhcnRpY2xlLnNwbGl0KCdcXG4nKTtcclxuXHRcdGNvbnNvbGUubG9nKCd+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ficpO1xyXG5cdFx0Zm9yIChsZXQgaT0wO2k8dGhpcy5hcnRpY2xlUGFydHMubGVuZ3RoOyBpKyspXHJcblx0XHR7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiQXJ0aWNsZSBQYXJ0OlwiLCB0aGlzLmFydGljbGVQYXJ0c1tpXS50eXBlLCB0aGlzLmFydGljbGVQYXJ0c1tpXS5iZWdpbiwgdGhpcy5hcnRpY2xlUGFydHNbaV0uZW5kKTtcclxuXHRcdFx0Zm9yKGxldCBqPXRoaXMuYXJ0aWNsZVBhcnRzW2ldLmJlZ2luOyBqPHRoaXMuYXJ0aWNsZVBhcnRzW2ldLmVuZDtqKyspXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhsaW5lc1tqXSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGNvbnNvbGUubG9nKCd+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ficpO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlU2VsZWN0aW9uPShlZGl0b3I6IEVkaXRvcik6dm9pZD0+XHJcblx0e1xyXG5cdFx0dGhpcy5zZWxlY3RlZFRleHQgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XHJcblx0XHR0aGlzLnVwZGF0ZUNoYXJBcm91bmRDdXJzb3IoZWRpdG9yKTtcclxuXHR9XHJcblxyXG5cdHVwZGF0ZUNoYXJBcm91bmRDdXJzb3I9KGVkaXRvcjogRWRpdG9yKTp2b2lkPT5cclxuXHR7XHJcblx0XHQvLyBpZih0aGlzLnNldHRpbmdzLkRlYnVnKSBjb25zb2xlLmxvZyhcInVwZGF0ZSBzZWxlY3Rpb246XFxuXCIgKyB0aGlzLnNlbGVjdGVkVGV4dCk7XHJcblx0XHRpZih0aGlzLnNlbGVjdGVkVGV4dCE9XCJcIikgcmV0dXJuO1xyXG5cdFx0bGV0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuXHRcdFxyXG5cdFx0aWYoY3Vyc29yLmNoIT0wKXtcclxuXHRcdFx0dGhpcy5jaGFyQmVmb3JlQ3Vyc29yID0gZWRpdG9yLmdldFJhbmdlKHtsaW5lOmN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0sIGN1cnNvcik7XHJcblx0XHR9XHJcblx0XHRlbHNle1xyXG5cdFx0XHR0aGlzLmNoYXJCZWZvcmVDdXJzb3IgPSBjdXJzb3IubGluZSE9MD9cIlxcblwiOlwiXCI7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYoY3Vyc29yLmNoICE9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKS5sZW5ndGgpXHJcblx0XHR7XHJcblx0XHRcdHRoaXMuY2hhckFmdGVyQ3Vyc29yID0gZWRpdG9yLmdldFJhbmdlKGN1cnNvciwge2xpbmU6Y3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaCsxfSk7XHJcblx0XHR9XHJcblx0XHRlbHNle1xyXG5cdFx0XHR0aGlzLmNoYXJBZnRlckN1cnNvciA9IGN1cnNvci5saW5lIT1lZGl0b3IubGluZUNvdW50KCktMT9cIlxcblwiOlwiXCI7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gaWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuXHRcdC8vIHtcclxuXHRcdC8vIFx0Y29uc29sZS5sb2coXCJjaGFyQmVmb3JlQ3Vyc29yXCIsIHRoaXMuY2hhckJlZm9yZUN1cnNvcik7XHJcblx0XHQvLyBcdGNvbnNvbGUubG9nKFwiY2hhckFmdGVyQ3Vyc29yXCIsIHRoaXMuY2hhckFmdGVyQ3Vyc29yKTtcclxuXHRcdC8vIH1cclxuXHR9XHJcblxyXG5cdHVwZGF0ZUxpbmU9KGVkaXRvcjogRWRpdG9yLCBsaW5lSW5kZXg6IG51bWJlciwgY3VyQ3Vyc29yOiBFZGl0b3JQb3NpdGlvbiwgc2V0dGluZ3M6IEZvcm1hdFNldHRpbmdzLCBcclxuXHRcdHByZXZDdXJzb3I/OiBFZGl0b3JQb3NpdGlvbiwgc2V0Q3Vyc29yPzogRWRpdG9yUG9zaXRpb24pOnZvaWQ9PlxyXG5cdHtcclxuXHRcdGxldCBmb3JtYXR0ZWRDaGFuZ2UgPSBmb3JtYXRMaW5lKGVkaXRvci5nZXRMaW5lKGxpbmVJbmRleCksIGN1ckN1cnNvciwgdGhpcy5zZXR0aW5ncywgdGhpcy5wcmV2Q3Vyc29yKTtcclxuXHRcdGxldCByZXN1bHRMaW5lID0gZm9ybWF0dGVkQ2hhbmdlWzBdO1xyXG5cdFx0bGV0IHJlc3VsdEN1cm9zckNoOiBudW1iZXIgPSBmb3JtYXR0ZWRDaGFuZ2VbMV07XHJcblx0XHRsZXQgaW5saW5lQ2hhbmdlTGlzdDogSW5saW5lQ2hhbmdlW109IGZvcm1hdHRlZENoYW5nZVsyXTtcclxuXHJcblx0XHQvLyBsZXQgb3JpZ2luTGluZVN0cmluZyA9IGVkaXRvci5nZXRMaW5lKGxpbmVJbmRleCk7XHJcblx0XHQvLyBsZXQgY3Vyc29yTGluZUJlZ2luID0ge2xpbmU6IGxpbmVJbmRleCwgY2g6MH07XHJcblx0XHQvLyBsZXQgY3Vyc29yTGluZUVuZCA9IHtsaW5lOiBsaW5lSW5kZXgsIGNoOm9yaWdpbkxpbmVTdHJpbmcubGVuZ3RofTtcclxuXHRcdC8vIGVkaXRvci5yZXBsYWNlUmFuZ2Uob3JpZ2luTGluZVN0cmluZywgY3Vyc29yTGluZUJlZ2luLCBjdXJzb3JMaW5lRW5kKTtcclxuXHJcblx0XHQvLyBBcHBseSBDaGFuZ2VzXHJcblx0XHRpZihpbmxpbmVDaGFuZ2VMaXN0Lmxlbmd0aCAhPSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IG9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaT0wO2k8aW5saW5lQ2hhbmdlTGlzdC5sZW5ndGg7aSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlQmVnaW46RWRpdG9yUG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZTogbGluZUluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIGNoOiBpbmxpbmVDaGFuZ2VMaXN0W2ldLmJlZ2luK29mZnNldFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGNoYW5nZUVuZDpFZGl0b3JQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lOiBsaW5lSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgY2g6IGlubGluZUNoYW5nZUxpc3RbaV0uZW5kK29mZnNldFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGlubGluZUNoYW5nZUxpc3RbaV0udGV4dC5sZW5ndGggLSBpbmxpbmVDaGFuZ2VMaXN0W2ldLm9yaWdpbi5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGlubGluZUNoYW5nZUxpc3RbaV0udGV4dCwgY2hhbmdlQmVnaW4sIGNoYW5nZUVuZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHRcdFx0aWYoIXNldEN1cnNvcilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGVkaXRvci5zZXRDdXJzb3Ioe1xyXG5cdFx0XHRcdFx0bGluZTogbGluZUluZGV4LFxyXG5cdFx0XHRcdFx0Y2g6IHJlc3VsdEN1cm9zckNoXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcihzZXRDdXJzb3IpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKCdjdXJzb3IgY2gnLCByZXN1bHRDdXJvc3JDaCk7ICAgICAgICAgICAgXHJcblx0XHRcdGVkaXRvci5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIEVhc3lUeXBpbmdTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBFYXN5VHlwaW5nUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFYXN5VHlwaW5nUGx1Z2luKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRsZXQge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHQvLyBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ1NldHRpbmdzIGZvciBFYXN5IFR5cGluZy4nfSk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdhJywge3RleHQ6ICdNb3JlIGRldGFpbCBpcyBpbiBHaXRodWI6IGVhc3ktdHlwaW5nLW9ic2lkaWFuJywgaHJlZjonaHR0cHM6Ly9naXRodWIuY29tL1lhb3podXdhL2Vhc3ktdHlwaW5nLW9ic2lkaWFuJ30pO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdcdTYwM0JcdTVGMDBcdTUxNzMgKE1hc3RlciBTd2l0Y2gpJ30pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJBdXRvIGZvcm1hdHRpbmcgd2hlbiB0eXBpbmdcIilcclxuXHRcdC5zZXREZXNjKFwiXHU2NjJGXHU1NDI2XHU1NzI4XHU3RjE2XHU4RjkxXHU2NTg3XHU2ODYzXHU2NUY2XHU4MUVBXHU1MkE4XHU2ODNDXHU1RjBGXHU1MzE2XHU2NTg3XHU2NzJDXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5BdXRvRm9ybWF0dGluZylcclxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5BdXRvRm9ybWF0dGluZyA9IHZhbHVlO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiQXV0b0Zvcm1hdHRpbmc6XCIsdmFsdWUpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnXHU4QkU2XHU3RUM2XHU4OUM0XHU1MjE5XHU1RjAwXHU1MTczIChTdWIgU3dpdGNoZXMpJ30pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJGdWxsLVdpZHRoIHN5bWJvbCBpbnB1dCBlbmhhbmNlbWVudFwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTUxNjhcdTg5RDJcdTdCMjZcdTUzRjdcdThGOTNcdTUxNjVcdTU4OUVcdTVGM0FcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkZ1bGxXaWR0aENoYXJhY3RlckVuaGFuY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5GdWxsV2lkdGhDaGFyYWN0ZXJFbmhhbmNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlNwYWNlIGJldHdlZW4gQ2hpbmVzZSBhbmQgRW5nbGlzaC9udW1iZXJcIilcclxuXHRcdC5zZXREZXNjKFwiXHU1NzI4XHU0RTJEXHU2NTg3XHU1NDhDXHU4MkYxXHU2NTg3L1x1NjU3MFx1NUI1N1x1OTVGNFx1N0E3QVx1NjgzQ1wiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuQ2hpbmVzZUVuZ2xpc2hTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkNoaW5lc2VFbmdsaXNoU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiRGVsZXRlIHRoZSBTcGFjZSBiZXR3ZWVuIENoaW5lc2UgY2hhcmFjdGVyc1wiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjhcdTRFMkRcdTY1ODdcdTVCNTdcdTdCMjZcdTk1RjRcdTUzQkJcdTk2NjRcdTdBN0FcdTY4M0NcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkNoaW5lc2VOb1NwYWNlKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuQ2hpbmVzZU5vU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU21hcnRseSBpbnNlcnQgc3BhY2UgYmV0d2VlbiB0ZXh0IGFuZCBwdW5jdHVhdGlvblwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjhcdTY1ODdcdTY3MkNcdTU0OENcdTY4MDdcdTcwQjlcdTk1RjRcdTY2N0FcdTgwRkRcdTdBN0FcdTY4M0NcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLlB1bmN0dWF0aW9uU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5QdW5jdHVhdGlvblNwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIkNhcGl0YWxpemUgdGhlIGZpcnN0IGxldHRlciBvZiBldmVyeSBzZW50ZW5jZVwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTgyRjFcdTY1ODdcdTZCQ0ZcdTRFMkFcdTUzRTVcdTk5OTZcdTVCNTdcdTZCQ0RcdTU5MjdcdTUxOTlcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkNhcGl0YWxpemF0aW9uKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuQ2FwaXRhbGl6YXRpb24gPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU3BhY2UgYmV0d2VlbiBpbmxpbmUgY29kZSBhbmQgdGV4dFwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjggYFx1ODg0Q1x1NTE4NVx1NEVFM1x1NzgwMWAgXHU1NDhDXHU2NTg3XHU2NzJDXHU5NUY0XHU3QTdBXHU2ODNDXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU3BhY2UgYmV0d2VlbiBpbmxpbmUgZm9ybXVsYSBhbmQgdGV4dFwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjggJFx1ODg0Q1x1NTE4NVx1NTE2Q1x1NUYwRiQgXHU1NDhDXHU2NTg3XHU2NzJDXHU5NUY0XHU3QTdBXHU2ODNDXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU3BhY2UgYmV0d2VlbiBsaW5rIGFuZCB0ZXh0XCIpXHJcblx0XHQuc2V0RGVzYyhcIlx1NTcyOCBbW3dpa2lsaW5rXV0gbWRsaW5rIFx1NTQ4Q1x1NjU4N1x1NjcyQ1x1OTVGNFx1N0E3QVx1NjgzQ1wiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuTGlua1NwYWNlKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuTGlua1NwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJTbWFydCBTcGFjZSBiZXR3ZWVuIGxpbmsgYW5kIHRleHRcIilcclxuXHRcdC5zZXREZXNjKFwiXHU1NzI4IFtbd2lraWxpbmtdXSBtZGxpbmsgXHU1NDhDXHU2NTg3XHU2NzJDXHU5NUY0XHU2NjdBXHU4MEZEXHU3QTdBXHU2ODNDXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5MaW5rU21hcnRTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkxpbmtTbWFydFNwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdcdTgxRUFcdTVCOUFcdTRFNDlcdTZCNjNcdTUyMTkgKEN1c3RvbSByZWd1bGFyIGV4cHJlc3Npb25zKSd9KTtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiVXNlciBEZWZpbmVkIFJlZ0V4cCBTd2l0Y2hcIilcclxuXHRcdC5zZXREZXNjKFwiXHU4MUVBXHU1QjlBXHU0RTQ5XHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHU1RjAwXHU1MTczXHVGRjBDXHU1MzM5XHU5MTREXHU1MjMwXHU3Njg0XHU1MTg1XHU1QkI5XHU0RTBEXHU4RkRCXHU4ODRDXHU2ODNDXHU1RjBGXHU1MzE2XCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5Vc2VyRGVmaW5lZFJlZ1N3aXRjaCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLlVzZXJEZWZpbmVkUmVnU3dpdGNoID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlNwYWNlIGJldHdlZW4gVXNlciBEZWZpbmVkIFBhcnQoc2VsZWN0ZWQgYnkgUmVnRXhwKSBhbmQgdGV4dFwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjhcdTc1MjhcdTYyMzdcdTgxRUFcdTVCOUFcdTRFNDlcdTUzM0FcdTU3NTcoXHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHU5MDA5XHU2MkU5KVx1NTQ4Q1x1NjU4N1x1NjcyQ1x1NEU0Qlx1OTVGNFx1N0E3QVx1NjgzQ1wiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuVXNlclBhcnRTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLlVzZXJQYXJ0U3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlVzZXIgZGVmaW5lZCBSZWdFeHAgdG8gaWdub3JlLCBvbmUgZXhwcmVzc2lvbiBwZXIgbGluZVwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTc1MjhcdTYyMzdcdTgxRUFcdTVCOUFcdTRFNDlcdTZCNjNcdTUyMTlcdTg4NjhcdThGQkVcdTVGMEZcdUZGMENcdTUzMzlcdTkxNERcdTUyMzBcdTc2ODRcdTUxODVcdTVCQjlcdTRFMERcdThGREJcdTg4NENcdTY4M0NcdTVGMEZcdTUzMTZcdUZGMENcdTZCQ0ZcdTg4NENcdTRFMDBcdTRFMkFcdTg4NjhcdThGQkVcdTVGMEZcdUZGMENcdTg4NENcdTVDM0VcdTRFMERcdTg5ODFcdTk2OEZcdTYxMEZcdTUyQTBcdTdBN0FcdTY4M0NcIilcclxuXHRcdC5hZGRUZXh0QXJlYSgodGV4dCkgPT5cclxuXHRcdFx0dGV4dFxyXG5cdFx0XHQuc2V0UGxhY2Vob2xkZXIoJzpcXFxcdyo6XFxue3suKj99fScpXHJcblx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5Vc2VyRGVmaW5lZFJlZ0V4cClcclxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLlVzZXJEZWZpbmVkUmVnRXhwID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLnBsdWdpbi5zZXR0aW5ncy5EZWJ1ZykgY29uc29sZS5sb2coXCJyZWdFeHAgY2hhbmdlZDpcIiwgdmFsdWUpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KVxyXG5cdFx0KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2EnLCB7dGV4dDogJ1JlZ0V4cDogXHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGJywgaHJlZjonaHR0cHM6Ly9qYXZhc2NyaXB0LnJ1YW55aWZlbmcuY29tL3N0ZGxpYi9yZWdleHAuaHRtbCMnfSk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnRGVidWcnfSk7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlByaW50IGRlYnVnIGluZm8gaW4gY29uc29sZVwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjhcdTYzQTdcdTUyMzZcdTUzRjBcdThGOTNcdTUxRkFcdThDMDNcdThCRDVcdTRGRTFcdTYwNkZcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkRlYnVnKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuRGVidWcgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBFZGl0b3JQb3NpdGlvbiwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcblxyXG5leHBvcnQgZW51bSBJbmxpbmVUeXBlIHt0ZXh0PSd0ZXh0JywgY29kZT0nY29kZScsIGZvcm11bGE9J2Zvcm11bGEnLCBsaW5rPSdsaW5rJywgdXNlcj0ndXNlci1kZWZpbmVkJywgbm9uZT0nbm9uZSd9XHJcbmV4cG9ydCBlbnVtIExpbmVUeXBlIHt0ZXh0PSd0ZXh0JywgY29kZT0nY29kZScsIGZvcm11bGE9J2Zvcm11bGEnLCBmcm9udG1hdHRlcj0nZnJvbnRtYXR0ZXInLCBub25lPSdub25lJ31cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXJ0aWNsZVBhcnRcclxue1xyXG4gICAgdHlwZTogTGluZVR5cGU7XHJcbiAgICBiZWdpbjogbnVtYmVyO1xyXG4gICAgZW5kOiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJbmxpbmVQYXJ0XHJcbntcclxuICAgIGNvbnRlbnQ6IHN0cmluZyxcclxuICAgIHR5cGU6IElubGluZVR5cGUsXHJcbiAgICBiZWdpbjogbnVtYmVyLFxyXG4gICAgZW5kOiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJbmxpbmVDaGFuZ2Vcclxue1xyXG4gICAgdGV4dDogc3RyaW5nLFxyXG4gICAgYmVnaW46IG51bWJlcixcclxuICAgIGVuZDogbnVtYmVyLFxyXG4gICAgb3JpZ2luOnN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZvcm1hdFNldHRpbmdzXHJcbntcclxuICAgIEF1dG9Gb3JtYXR0aW5nOiBib29sZWFuO1xyXG5cdENoaW5lc2VFbmdsaXNoU3BhY2U6IGJvb2xlYW47XHJcblx0Q2hpbmVzZU5vU3BhY2U6IGJvb2xlYW47XHJcbiAgICBDYXBpdGFsaXphdGlvbjogYm9vbGVhbjtcclxuXHJcblx0RW5nbGlzaFNwYWNlOiBib29sZWFuO1xyXG5cdEJyYWNlU3BhY2U6IGJvb2xlYW47XHJcblx0TnVtYmVyU3BhY2U6IGJvb2xlYW47XHJcblxyXG4gICAgUHVuY3R1YXRpb25TcGFjZTogYm9vbGVhbjtcclxuICAgIElubGluZUNvZGVTcGFjZTogYm9vbGVhbjtcclxuXHRJbmxpbmVGb3JtdWxhU3BhY2U6IGJvb2xlYW47XHJcbiAgICBMaW5rU3BhY2U6IGJvb2xlYW47XHJcbiAgICBMaW5rU21hcnRTcGFjZTogYm9vbGVhbjtcclxuXHJcbiAgICBGdWxsV2lkdGhDaGFyYWN0ZXJFbmhhbmNlOmJvb2xlYW47XHJcblxyXG4gICAgVXNlckRlZmluZWRSZWdFeHA6c3RyaW5nO1xyXG4gICAgVXNlckRlZmluZWRSZWdTd2l0Y2g6IGJvb2xlYW47XHJcbiAgICBVc2VyUGFydFNwYWNlOiBib29sZWFuO1xyXG5cclxuICAgIERlYnVnOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRm9ybWF0U2V0dGluZ3MgPSB7XHJcbiAgICBBdXRvRm9ybWF0dGluZzogdHJ1ZSxcclxuXHRDaGluZXNlRW5nbGlzaFNwYWNlOiB0cnVlLFxyXG5cdENoaW5lc2VOb1NwYWNlOiB0cnVlLFxyXG4gICAgQ2FwaXRhbGl6YXRpb246IHRydWUsXHJcblxyXG4gICAgUHVuY3R1YXRpb25TcGFjZTogdHJ1ZSxcclxuXHRFbmdsaXNoU3BhY2U6IHRydWUsXHJcblx0QnJhY2VTcGFjZTogdHJ1ZSxcclxuXHROdW1iZXJTcGFjZTogdHJ1ZSxcclxuXHJcbiAgICBJbmxpbmVDb2RlU3BhY2U6IHRydWUsXHJcblx0SW5saW5lRm9ybXVsYVNwYWNlOiB0cnVlLFxyXG5cdExpbmtTcGFjZTogdHJ1ZSxcclxuICAgIExpbmtTbWFydFNwYWNlOiB0cnVlLFxyXG5cclxuICAgIEZ1bGxXaWR0aENoYXJhY3RlckVuaGFuY2U6IHRydWUsXHJcbiAgICBVc2VyRGVmaW5lZFJlZ0V4cDonOlxcXFx3KjpcXG57ey4qP319JyxcclxuICAgIFVzZXJEZWZpbmVkUmVnU3dpdGNoOiB0cnVlLFxyXG4gICAgVXNlclBhcnRTcGFjZTp0cnVlLFxyXG4gICAgRGVidWc6ZmFsc2VcclxufVxyXG5cclxuLy8gXHU1QkY5XHU1OTFBXHU4ODRDXHU2NTg3XHU2NzJDXHU4RkRCXHU4ODRDXHU4OUUzXHU2NzkwXHU1Rjk3XHU1MjMwXHU2QkNGXHU4ODRDXHU3Njg0XHU3QzdCXHU1NzhCXHJcbmV4cG9ydCBmdW5jdGlvbiBzcGxpdEFydGljbGUoYXJ0aWNsZTpzdHJpbmcsIGNoZWNrRnJvbnRNYXR0ZXI6Ym9vbGVhbj10cnVlLCBiZWdpbkluZGV4Om51bWJlcj0wKTogQXJ0aWNsZVBhcnRbXVxyXG57XHJcbiAgICBsZXQgcmV0QXJyYXk6IEFydGljbGVQYXJ0W10gPSBbXTtcclxuICAgIGxldCBsaW5lcyA9IGFydGljbGUuc3BsaXQoJ1xcbicpO1xyXG4gICAgY29uc29sZS5sb2coJ2xpbmUgbnVtYmVyJywgbGluZXMubGVuZ3RoKTtcclxuICAgIGxldCByZWdOdWxsTGluZSA9IC9eXFxzKiQvO1xyXG4gICAgbGV0IHJlZ0Zvcm11bGFCZWdpbiA9IC9eXFxzKihcXC0gKFxcW1t4IF1cXF0gKT8pP1xcJFxcJC87XHJcbiAgICBsZXQgcmVnRm9ybXVsYUVuZCA9IC9cXCRcXCQkLztcclxuICAgIGxldCByZWdDb2RlQmVnaW4gPSAvXlxccypgYGAvO1xyXG4gICAgbGV0IHJlZ0NvZGVFbmQgPSAvXlxccypgYGAkLztcclxuICAgIGxldCBpbmRleCA9IGJlZ2luSW5kZXg7XHJcbiAgICBsZXQgcmVnQWRtb25pdGlvbkJsb2NrQmVnaW4gPSAvXlxccypgYGBhZC1cXHcrL2c7XHJcblxyXG4gICAgLy8gMS4gXHU1MjI0XHU2NUFEIGZyb250bWF0dGVyXHU1MzNBXHU1N0RGXHJcbiAgICBpZihjaGVja0Zyb250TWF0dGVyKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBmcm9udE1hdHRlclBhcnQ6IEFydGljbGVQYXJ0O1xyXG4gICAgICAgIGZvcihsZXQgaT0wO2k8bGluZXMubGVuZ3RoO2krKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHJlZ051bGxMaW5lLnRlc3QobGluZXNbaV0pKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKGxpbmVzW2ldPT09Jy0tLScpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaj1pKzE7IGo8bGluZXMubGVuZ3RoO2orKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihsaW5lc1tqXT09PSctLS0nKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaSE9MClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0QXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogTGluZVR5cGUudGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjowLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDppXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9udE1hdHRlclBhcnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBMaW5lVHlwZS5mcm9udG1hdHRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBqKzFcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0QXJyYXkucHVzaChmcm9udE1hdHRlclBhcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGorMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBjb25zb2xlLmxvZygnaW5kZXgnLCBpbmRleCk7XHJcblxyXG4gICAgLy8gMi4gXHU5MDREXHU1Mzg2XHU4ODRDXHU1Rjk3XHU1MjMwIExpbmVUeXBlIFx1NTIwNlx1NTMzQVxyXG4gICAgd2hpbGUoaW5kZXg8bGluZXMubGVuZ3RoKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHJlZ0NvZGVCZWdpbi50ZXN0KGxpbmVzW2luZGV4XSkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgaiA9IGluZGV4KzE7XHJcbiAgICAgICAgICAgIHdoaWxlKGo8bGluZXMubGVuZ3RoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihyZWdDb2RlRW5kLnRlc3QobGluZXNbal0pKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgaisrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGo9PT1saW5lcy5sZW5ndGggfHwgIXJlZ0FkbW9uaXRpb25CbG9ja0JlZ2luLnRlc3QobGluZXNbaW5kZXhdKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaiA9IGo9PT1saW5lcy5sZW5ndGg/ai0xOmo7XHJcbiAgICAgICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBMaW5lVHlwZS5jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOmluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDpqKzFcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFx1NUJGOUFkbWluaXRpb25Cb2xja1x1NTA1QVx1NzI3OVx1NkI4QVx1NTkwNFx1NzQwNlxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46aW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOmluZGV4KzFcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0QXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogTGluZVR5cGUudGV4dCxcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbjppbmRleCsxLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDpqXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46aixcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6aisxXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpbmRleCA9IGorMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihyZWdGb3JtdWxhQmVnaW4udGVzdChsaW5lc1tpbmRleF0pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHJlZ0Zvcm11bGFPbmVMaW5lID0gLyg/PCFcXFxcKVxcJFxcJCg/ISApW15dKj8oPzwhICkoPzwhXFxcXClcXCRcXCQvZztcclxuICAgICAgICAgICAgaWYocmVnRm9ybXVsYU9uZUxpbmUudGVzdChsaW5lc1tpbmRleF0pKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBMaW5lVHlwZS5mb3JtdWxhLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOiBpbmRleCxcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6IGluZGV4KzFcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaW5kZXggKz0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgbGV0IGogPSBpbmRleCsxO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUoajxsaW5lcy5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVnRm9ybXVsYUVuZC50ZXN0KGxpbmVzW2pdKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgaisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaiA9IGo9PT1saW5lcy5sZW5ndGg/ai0xOmo7XHJcbiAgICAgICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBMaW5lVHlwZS5mb3JtdWxhLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOmluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDpqKzFcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBqKzE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGogPSBpbmRleCsxO1xyXG4gICAgICAgICAgICBmb3IoO2o8bGluZXMubGVuZ3RoO2orKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYocmVnQ29kZUJlZ2luLnRlc3QobGluZXNbal0pIHx8IHJlZ0Zvcm11bGFCZWdpbi50ZXN0KGxpbmVzW2pdKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLnRleHQsXHJcbiAgICAgICAgICAgICAgICBiZWdpbjogaW5kZXgsXHJcbiAgICAgICAgICAgICAgICBlbmQ6alxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaW5kZXggPSBqO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmV0QXJyYXk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXBhcnNlQXJ0aWNsZVBhcnRzKGFydGljbGU6IHN0cmluZywgcHJldkFydGljbGVQYXJ0OkFydGljbGVQYXJ0W118bnVsbCwgdXBkYXRlTGluZVN0YXJ0OiBudW1iZXIsIHByaW50OmJvb2xlYW49ZmFsc2UpOiBBcnRpY2xlUGFydFtdXHJcbntcclxuICAgIGlmKHByZXZBcnRpY2xlUGFydCA9PT0gbnVsbCB8fCB1cGRhdGVMaW5lU3RhcnQ9PT0wKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBzcGxpdEFydGljbGUoYXJ0aWNsZSk7XHJcbiAgICB9XHJcbiAgICBsZXQgbGluZXMgPSBhcnRpY2xlLnNwbGl0KCdcXG4nKTtcclxuICAgIGxldCByZXM6IEFydGljbGVQYXJ0W10gPSBbXTtcclxuICAgIGxldCBuZXdCZWdpbkluZGV4ID0gMDtcclxuICAgIGxldCBjaGFuZ2VBcnRpY2xlUGFydEluZGV4ID0gMDtcclxuICAgIGZvcihsZXQgaT0wO2k8cHJldkFydGljbGVQYXJ0Lmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICAgICAgaWYodXBkYXRlTGluZVN0YXJ0Pj1wcmV2QXJ0aWNsZVBhcnRbaV0uYmVnaW4gJiYgdXBkYXRlTGluZVN0YXJ0PHByZXZBcnRpY2xlUGFydFtpXS5lbmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuZXdCZWdpbkluZGV4ID0gcHJldkFydGljbGVQYXJ0W2ldLmJlZ2luO1xyXG4gICAgICAgICAgICBjaGFuZ2VBcnRpY2xlUGFydEluZGV4ID0gaTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHJlcy5wdXNoKHByZXZBcnRpY2xlUGFydFtpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NTIyNFx1NjVBRFx1NjYyRlx1NTQyNlx1NjYyRkFkbW9uaXRpb25cdTc2ODRcdTdGMTZcdThGOTFcdTU3NTdcclxuICAgIGxldCByZWdBZG1vbml0aW9uQmxvY2tCZWdpbiA9IC9gYGBhZC1cXHcrL2c7XHJcbiAgICBpZiggcHJldkFydGljbGVQYXJ0W2NoYW5nZUFydGljbGVQYXJ0SW5kZXhdLnR5cGUgPT09IExpbmVUeXBlLnRleHQgJiYgbmV3QmVnaW5JbmRleCE9MCAmJiByZWdBZG1vbml0aW9uQmxvY2tCZWdpbi50ZXN0KGxpbmVzW25ld0JlZ2luSW5kZXgtMV0pKVxyXG4gICAge1xyXG4gICAgICAgIGNoYW5nZUFydGljbGVQYXJ0SW5kZXggLT0gMTtcclxuICAgICAgICByZXMucG9wKCk7XHJcbiAgICB9XHJcbiAgICAvLyBcdTUyMjRcdTY1QURcdTY2MkZBZG1vbml0aW9uXHU3Njg0XHU0RTBCXHU2NUI5YGBgXHU1NzU3XHU5MEU4XHU1MjA2XHJcbiAgICBlbHNlIGlmKHByZXZBcnRpY2xlUGFydFtjaGFuZ2VBcnRpY2xlUGFydEluZGV4XS5iZWdpbiA9PT0gcHJldkFydGljbGVQYXJ0W2NoYW5nZUFydGljbGVQYXJ0SW5kZXhdLmVuZC0xICYmIFxyXG4gICAgICAgIGNoYW5nZUFydGljbGVQYXJ0SW5kZXg+PTIgJiYgcmVnQWRtb25pdGlvbkJsb2NrQmVnaW4udGVzdChsaW5lc1twcmV2QXJ0aWNsZVBhcnRbY2hhbmdlQXJ0aWNsZVBhcnRJbmRleC0yXS5lbmQtMV0pKVxyXG4gICAge1xyXG4gICAgICAgIGNoYW5nZUFydGljbGVQYXJ0SW5kZXggLT0gMjtcclxuICAgICAgICByZXMucG9wKCk7XHJcbiAgICAgICAgcmVzLnBvcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKGNoYW5nZUFydGljbGVQYXJ0SW5kZXg9PT0wKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBzcGxpdEFydGljbGUoYXJ0aWNsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmV3QmVnaW5JbmRleCA9IHByZXZBcnRpY2xlUGFydFtjaGFuZ2VBcnRpY2xlUGFydEluZGV4XS5iZWdpbjtcclxuICAgIGxldCBuZXdQYXJ0cyA9IHNwbGl0QXJ0aWNsZShhcnRpY2xlLCBmYWxzZSwgbmV3QmVnaW5JbmRleCk7XHJcbiAgICBmb3IobGV0IGo9MDtqPG5ld1BhcnRzLmxlbmd0aDtqKyspXHJcbiAgICB7XHJcbiAgICAgICAgcmVzLnB1c2gobmV3UGFydHNbal0pO1xyXG4gICAgfVxyXG4gICAgaWYocHJpbnQpIG5ldyBOb3RpY2UoXCJSZXBhcnNlIEFydGljbGU6IGJlZ2luIGxpbmUgaW5kZXggXCIrbmV3QmVnaW5JbmRleC50b1N0cmluZygpKTtcclxuICAgIHJldHVybiByZXM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRMaW5lVHlwZUZyb21BcnRpY2xlUGFydHMobGluZTogbnVtYmVyLCB0eXBlQXJyYXk6IEFydGljbGVQYXJ0W10pOkxpbmVUeXBlXHJcbntcclxuICAgIGZvcihsZXQgaT0wO2k8dHlwZUFycmF5Lmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICAgICAgaWYobGluZSA+PSB0eXBlQXJyYXlbaV0uYmVnaW4gJiYgbGluZTx0eXBlQXJyYXlbaV0uZW5kKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVBcnJheVtpXS50eXBlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0RlbGV0ZUF0KHN0cjogc3RyaW5nLCBpbmRleDogbnVtYmVyKTpzdHJpbmdcclxue1xyXG4gICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgaW5kZXgpK3N0ci5zdWJzdHJpbmcoaW5kZXgrMSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdJbnNlcnRBdChzdHI6c3RyaW5nLCBpbmRleDogbnVtYmVyLCBzOiBzdHJpbmcpOnN0cmluZ1xyXG57XHJcbiAgICByZXR1cm4gc3RyLnN1YnN0cmluZygwLCBpbmRleCkrcytzdHIuc3Vic3RyaW5nKGluZGV4KTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBcdTUyMDZcdTUyNzJcdTRFMDBcdTg4NENcdTY1ODdcdTY3MkNcdUZGMENcdTVGOTdcdTUyMzBcdTRFMERcdTU0MENcdTUzM0FcdTU3REZcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzcGxpdExpbmUobGluZTogc3RyaW5nLCByZWdFeHBzPzpzdHJpbmcpOiBJbmxpbmVQYXJ0W11cclxue1xyXG4gICAgbGV0IHJlZ0lubGluZU1hcmsgPSAvKD88IVxcXFwpXFwkfCg/PCFcXFxcKVxcYC9nO1xyXG4gICAgbGV0IHJlZ0Zvcm11bGFJbmxpbmUgPSAvKD88IVxcXFwpXFwkKD8hIClbXl0rPyg/PCEgKSg/PCFcXFxcKVxcJC9nO1xyXG4gICAgbGV0IHJlZ0Zvcm11bGFCbG9jayA9IC8oPzwhXFxcXClcXCRcXCQoPyEgKVteXSo/KD88ISApKD88IVxcXFwpXFwkXFwkL2c7XHJcbiAgICBsZXQgcmVnQ29kZSA9IC8oPzwhXFxcXClgW15dKj8oPzwhXFxcXClgL2c7XHJcbiAgICBsZXQgbWFya1F1ZXVlOlJlZ0V4cEV4ZWNBcnJheVtdID0gW107XHJcbiAgICBsZXQgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYTogSW5saW5lUGFydFtdID0gW107XHJcblxyXG4gICAgd2hpbGUodHJ1ZSlcclxuICAgIHtcclxuICAgICAgICBsZXQgbWF0Y2ggPSByZWdJbmxpbmVNYXJrLmV4ZWMobGluZSk7XHJcbiAgICAgICAgaWYoIW1hdGNoKSBicmVhaztcclxuICAgICAgICBtYXJrUXVldWUucHVzaChtYXRjaCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRleHRCZWdpbkluZGV4ID0gMDtcclxuICAgIHdoaWxlKG1hcmtRdWV1ZS5sZW5ndGghPTApXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IG1hcmsgPSBtYXJrUXVldWUuc2hpZnQoKTtcclxuICAgICAgICBpZihtYXJrLmluZGV4PHRleHRCZWdpbkluZGV4KSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgaWYobWFya1swXT09PSckJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBtYXRjaEZvcm11bGFCZWdpbkluZGV4Om51bWJlcjtcclxuICAgICAgICAgICAgbGV0IG1hdGNoRm9ybXVsYUxhc3RJbmRleDpudW1iZXI7XHJcbiAgICAgICAgICAgIHJlZ0Zvcm11bGFCbG9jay5sYXN0SW5kZXggPSBtYXJrLmluZGV4O1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hCbG9ja0Zvcm11bGEgPSByZWdGb3JtdWxhQmxvY2suZXhlYyhsaW5lKTtcclxuICAgICAgICAgICAgaWYobWF0Y2hCbG9ja0Zvcm11bGEgJiYgbWF0Y2hCbG9ja0Zvcm11bGEuaW5kZXg9PT1tYXJrLmluZGV4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaEZvcm11bGFCZWdpbkluZGV4ID0gbWF0Y2hCbG9ja0Zvcm11bGEuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBtYXRjaEZvcm11bGFMYXN0SW5kZXggPSByZWdGb3JtdWxhQmxvY2subGFzdEluZGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVnRm9ybXVsYUlubGluZS5sYXN0SW5kZXggPSBtYXJrLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoSW5saW5lRm9ybXVsYSA9IHJlZ0Zvcm11bGFJbmxpbmUuZXhlYyhsaW5lKTtcclxuICAgICAgICAgICAgICAgIGlmKG1hdGNoSW5saW5lRm9ybXVsYSAmJiBtYXRjaElubGluZUZvcm11bGEuaW5kZXg9PT1tYXJrLmluZGV4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoRm9ybXVsYUJlZ2luSW5kZXggPSBtYXRjaElubGluZUZvcm11bGEuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3JtdWxhTGFzdEluZGV4ID0gcmVnRm9ybXVsYUlubGluZS5sYXN0SW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTUzMzlcdTkxNERcdTUyMzBcdUZGMENcdTUyMTkgY29udGludWVcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYobWFyay5pbmRleD50ZXh0QmVnaW5JbmRleClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogbGluZS5zdWJzdHJpbmcodGV4dEJlZ2luSW5kZXgsIG1hcmsuaW5kZXgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBJbmxpbmVUeXBlLnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiB0ZXh0QmVnaW5JbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBtYXJrLmluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGxpbmUuc3Vic3RyaW5nKG1hdGNoRm9ybXVsYUJlZ2luSW5kZXgsIG1hdGNoRm9ybXVsYUxhc3RJbmRleCksXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTpJbmxpbmVUeXBlLmZvcm11bGEsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46bWF0Y2hGb3JtdWxhQmVnaW5JbmRleCxcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6bWF0Y2hGb3JtdWxhTGFzdEluZGV4XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRleHRCZWdpbkluZGV4ID0gbWF0Y2hGb3JtdWxhTGFzdEluZGV4O1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihtYXJrWzBdPT09J2AnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IG1hdGNoQ29kZUJlZ2luSW5kZXg6bnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hDb2RlTGFzdEluZGV4Om51bWJlcjtcclxuICAgICAgICAgICAgcmVnQ29kZS5sYXN0SW5kZXggPSBtYXJrLmluZGV4O1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hJbmxpbmVDb2RlID0gcmVnQ29kZS5leGVjKGxpbmUpO1xyXG4gICAgICAgICAgICBpZihtYXRjaElubGluZUNvZGUgJiYgbWF0Y2hJbmxpbmVDb2RlLmluZGV4PT09bWFyay5pbmRleClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hDb2RlQmVnaW5JbmRleCA9IG1hdGNoSW5saW5lQ29kZS5pbmRleDtcclxuICAgICAgICAgICAgICAgIG1hdGNoQ29kZUxhc3RJbmRleCA9IHJlZ0NvZGUubGFzdEluZGV4O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKG1hcmsuaW5kZXg+dGV4dEJlZ2luSW5kZXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBsaW5lLnN1YnN0cmluZyh0ZXh0QmVnaW5JbmRleCwgbWFyay5pbmRleCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOklubGluZVR5cGUudGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiB0ZXh0QmVnaW5JbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbWFyay5pbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogbGluZS5zdWJzdHJpbmcobWF0Y2hDb2RlQmVnaW5JbmRleCwgbWF0Y2hDb2RlTGFzdEluZGV4KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTpJbmxpbmVUeXBlLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOm1hdGNoQ29kZUJlZ2luSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDptYXRjaENvZGVMYXN0SW5kZXhcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdGV4dEJlZ2luSW5kZXggPSBtYXRjaENvZGVMYXN0SW5kZXg7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYodGV4dEJlZ2luSW5kZXghPWxpbmUubGVuZ3RoKVxyXG4gICAge1xyXG4gICAgICAgIGFycmF5T2ZJbmxpbmVUZXh0Q29kZUZvcm11bGEucHVzaChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogbGluZS5zdWJzdHJpbmcodGV4dEJlZ2luSW5kZXgpLFxyXG4gICAgICAgICAgICAgICAgdHlwZTpJbmxpbmVUeXBlLnRleHQsXHJcbiAgICAgICAgICAgICAgICBiZWdpbjp0ZXh0QmVnaW5JbmRleCxcclxuICAgICAgICAgICAgICAgIGVuZDpsaW5lLmxlbmd0aFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICBsZXQgcmV0QXJyYXk6IElubGluZVBhcnRbXSA9IFtdO1xyXG4gICAgZm9yKGxldCBpPTA7aTxhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhLmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICAgICAgaWYoYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYVtpXS50eXBlIT1JbmxpbmVUeXBlLnRleHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXRBcnJheS5wdXNoKGFycmF5T2ZJbmxpbmVUZXh0Q29kZUZvcm11bGFbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgdGVtcEFycmF5OklubGluZVBhcnRbXTtcclxuICAgICAgICAgICAgaWYocmVnRXhwcylcclxuICAgICAgICAgICAgICAgIHRlbXBBcnJheSA9IHNwbGl0VGV4dFdpdGhMaW5rQW5kVXNlckRlZmluZWQoYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYVtpXS5jb250ZW50LCByZWdFeHBzKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGVtcEFycmF5ID0gc3BsaXRUZXh0V2l0aExpbmtBbmRVc2VyRGVmaW5lZChhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhW2ldLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGVtcEFycmF5LmZvckVhY2goaXRlbT0+e1xyXG4gICAgICAgICAgICAgICAgaXRlbS5iZWdpbiArPSBhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhW2ldLmJlZ2luO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5lbmQgKz0gYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYVtpXS5iZWdpbjtcclxuICAgICAgICAgICAgICAgIHJldEFycmF5LnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmV0QXJyYXk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1hdGNoV2l0aFJlZyh0ZXh0OnN0cmluZywgcmVnRXhwOlJlZ0V4cCwgdHlwZTogSW5saW5lVHlwZSwgaW5saW5lVHlwZUFycmF5OklubGluZVBhcnRbXSwgY2hlY2tBcnJheT1mYWxzZSk6SW5saW5lUGFydFtdXHJcbntcclxuICAgIGxldCByZXRBcnJheSA9IGlubGluZVR5cGVBcnJheTtcclxuICAgIGxldCBtYXRjaEFycmF5OklubGluZVBhcnRbXSA9IFtdO1xyXG4gICAgcmV0QXJyYXkgPSByZXRBcnJheS5zb3J0KChhLCBiKTpudW1iZXI9PmEuYmVnaW4tYi5iZWdpbik7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnYmVmb3JlLS0tLS0tLS0tLS1cXG4nLHJldEFycmF5KVxyXG4gICAgd2hpbGUodHJ1ZSlcclxuICAgIHtcclxuICAgICAgICBsZXQgbWF0Y2ggPSByZWdFeHAuZXhlYyh0ZXh0KTsgXHJcbiAgICAgICAgaWYoIW1hdGNoKSBicmVhaztcclxuICAgICAgICBsZXQgdmFsaWQgPSB0cnVlO1xyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTFCMlx1N0E4MVxyXG4gICAgICAgIGlmKGNoZWNrQXJyYXkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IobGV0IGk9MDtpPHJldEFycmF5Lmxlbmd0aDtpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKG1hdGNoLmluZGV4PD1yZXRBcnJheVtpXS5iZWdpbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZWdFeHAubGFzdEluZGV4IDw9IHJldEFycmF5W2ldLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihyZWdFeHAubGFzdEluZGV4IDw9IHJldEFycmF5W2ldLmVuZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlZ0V4cC5sYXN0SW5kZXggPiByZXRBcnJheVtpXS5lbmQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVtb3ZlQ291bnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaj1pKzE7IGo8cmV0QXJyYXkubGVuZ3RoO2orKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVnRXhwLmxhc3RJbmRleDw9cmV0QXJyYXlbal0uYmVnaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ291bnQgPSBqLWk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihyZWdFeHAubGFzdEluZGV4PHJldEFycmF5W2pdLmVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2YWxpZClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0QXJyYXkuc3BsaWNlKGksIHJlbW92ZUNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgLT0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihtYXRjaC5pbmRleD5yZXRBcnJheVtpXS5iZWdpbiAmJiBtYXRjaC5pbmRleDxyZXRBcnJheVtpXS5lbmQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZighdmFsaWQpIGNvbnRpbnVlO1xyXG4gICAgICAgIG1hdGNoQXJyYXkucHVzaChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogbWF0Y2hbMF0sXHJcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxyXG4gICAgICAgICAgICAgICAgYmVnaW46IG1hdGNoLmluZGV4LFxyXG4gICAgICAgICAgICAgICAgZW5kOiByZWdFeHAubGFzdEluZGV4XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0QXJyYXkgPSByZXRBcnJheS5jb25jYXQobWF0Y2hBcnJheSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnQWZ0ZXI9PT09PT09PT09PVxcbicsIHJldEFycmF5KTtcclxuICAgIHJldHVybiByZXRBcnJheTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBcdTUyMDZcdTUyNzJcdTRFMDBcdTg4NENcdTY1ODdcdTY3MkNcdTRFMkRcdTc2ODRcdTk0RkVcdTYzQTVcdTU0OENcdTc1MjhcdTYyMzdcdTgxRUFcdTVCOUFcdTRFNDlcdTc2ODRcdTZCNjNcdTUyMTlcdTkwRThcdTUyMDZcdUZGMENcdTVGOTdcdTUyMzAgSW5saW5lUGFydCBcdTc2ODRcdTRFMERcdTU0MENcdTUzM0FcdTU3REZcclxuICovXHJcbmZ1bmN0aW9uIHNwbGl0VGV4dFdpdGhMaW5rQW5kVXNlckRlZmluZWQodGV4dDogc3RyaW5nLCByZWdFeHBzPzpzdHJpbmcpOklubGluZVBhcnRbXVxyXG57XHJcbiAgICBsZXQgcmV0QXJyYXk6IElubGluZVBhcnRbXSA9IFtdO1xyXG4gICAgbGV0IHJlZ1dpa2lMaW5rID0gL1xcIT9cXFtcXFtbXlxcW1xcXV0qP1xcXVxcXS9nO1xyXG4gICAgbGV0IHJlZ01kTGluayA9IC9cXCE/XFxbW15cXFtcXF1dKj9cXF1cXChbXlxcc1xcKVxcKFxcW1xcXVxce1xcfSddKlxcKS9nO1xyXG4gICAgLy8gbGV0IHJlZ0JhcmVMaW5rID0gLyhodHRwcz98b2JzaWRpYW58em90ZXJvKTpcXC9cXC9bXlxcc1xcKVxcKFxcW1xcXVxce1xcfSddKy9nO1xyXG4gICAgbGV0IHJlZ0JhcmVMaW5rID0gLyhodHRwcz86XFwvXFwvfGZ0cDpcXC9cXC98b2JzaWRpYW46XFwvXFwvfHpvdGVybzpcXC9cXC98d3d3LilbXlxcc1x1RkYwOFx1RkYwOVx1MzAwQVx1MzAwQlx1MzAwMlx1RkYwQ1x1RkYwMVx1RkYxRlx1RkYxQlx1RkYxQVx1MjAxQ1x1MjAxRFx1MjAxOFx1MjAxOVxcKVxcKFxcW1xcXVxce1xcfSddKy9nO1xyXG5cclxuICAgIC8vIDEuIFx1NTMzOVx1OTE0RHdpa2lsaW5rXHJcbiAgICByZXRBcnJheSA9IG1hdGNoV2l0aFJlZyh0ZXh0LCByZWdXaWtpTGluaywgSW5saW5lVHlwZS5saW5rLCByZXRBcnJheSk7XHJcbiAgICAvLyAyLiBcdTUzMzlcdTkxNERtZGxpbmtcclxuICAgIHJldEFycmF5ID0gbWF0Y2hXaXRoUmVnKHRleHQsIHJlZ01kTGluaywgSW5saW5lVHlwZS5saW5rLCByZXRBcnJheSk7XHJcblxyXG4gICAgLy8gMy4gXHU1MzM5XHU5MTREXHU3NTI4XHU2MjM3XHU4MUVBXHU1QjlBXHU0RTQ5XHU2QjYzXHU1MjE5XHJcbiAgICBsZXQgcmVnRXhwTGlzdDogUmVnRXhwW10gPSBbXTtcclxuICAgIGlmKHJlZ0V4cHMpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHJlZ3MgPSByZWdFeHBzLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICBmb3IobGV0IGk9MDtpPHJlZ3MubGVuZ3RoO2krKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCByZWdOdWxsID0gL15cXHMqJC9nO1xyXG4gICAgICAgICAgICBpZihyZWdOdWxsLnRlc3QocmVnc1tpXSkpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBsZXQgaXNWYWxpZFJlZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRyeXtcclxuICAgICAgICAgICAgICAgIGxldCByZWdUZW1wID0gbmV3IFJlZ0V4cChyZWdzW2ldLCAnZycpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2goZXJyb3IpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlzVmFsaWRSZWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdCYWQgUmVnOicsIHJlZ3NbaV0pO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkJhZCBSZWdFeHA6XCIgKyByZWdzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoaXNWYWxpZFJlZykgXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlZ0V4cExpc3QucHVzaChuZXcgUmVnRXhwKHJlZ3NbaV0sICdnJykpO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0dvb2QgUmVnOicsIHJlZ3NbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZWdMZW4gPSByZWdFeHBMaXN0Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTxyZWdMZW47aSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0QXJyYXkgPSBtYXRjaFdpdGhSZWcodGV4dCwgcmVnRXhwTGlzdFtpXSwgSW5saW5lVHlwZS51c2VyLCByZXRBcnJheSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyA0LiBcdTUzMzlcdTkxNERcdTdFQUZcdTk0RkVcdTYzQTVcclxuICAgIHJldEFycmF5ID0gbWF0Y2hXaXRoUmVnKHRleHQsIHJlZ0JhcmVMaW5rLCBJbmxpbmVUeXBlLmxpbmssIHJldEFycmF5LCB0cnVlKTtcclxuXHJcbiAgICAvLyA1LiBcdTVGOTdcdTUyMzBcdTUyNjlcdTRGNTlcdTc2ODRcdTY1ODdcdTY3MkNcdTkwRThcdTUyMDZcclxuICAgIHJldEFycmF5ID0gcmV0QXJyYXkuc29ydCgoYSwgYik6bnVtYmVyPT5hLmJlZ2luLWIuYmVnaW4pO1xyXG5cclxuICAgIGxldCB0ZXh0QXJyYXkgOiBJbmxpbmVQYXJ0W10gPSBbXTtcclxuICAgIGxldCB0ZXh0QmVnaW4gPSAwO1xyXG4gICAgbGV0IHRleHRFbmQgPSAwO1xyXG4gICAgZm9yKGxldCBpPTA7aTxyZXRBcnJheS5sZW5ndGg7aSsrKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHRleHRCZWdpbjxyZXRBcnJheVtpXS5iZWdpbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRleHRFbmQgPSByZXRBcnJheVtpXS5iZWdpbjtcclxuICAgICAgICAgICAgdGV4dEFycmF5LnB1c2goXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogdGV4dC5zdWJzdHJpbmcodGV4dEJlZ2luLCB0ZXh0RW5kKSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBJbmxpbmVUeXBlLnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46IHRleHRCZWdpbixcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6IHRleHRFbmRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGV4dEJlZ2luID0gcmV0QXJyYXlbaV0uZW5kO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHRleHRCZWdpbiE9dGV4dC5sZW5ndGgpXHJcbiAgICB7XHJcbiAgICAgICAgdGV4dEFycmF5LnB1c2goXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRleHQuc3Vic3RyaW5nKHRleHRCZWdpbiwgdGV4dC5sZW5ndGgpLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogSW5saW5lVHlwZS50ZXh0LFxyXG4gICAgICAgICAgICAgICAgYmVnaW46IHRleHRCZWdpbixcclxuICAgICAgICAgICAgICAgIGVuZDogdGV4dC5sZW5ndGhcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gNi4gXHU1NDA4XHU1RTc2XHU2NTg3XHU2NzJDXHU5MEU4XHU1MjA2XHU1NDhDXHU1MTc2XHU0RUQ2XHU5MEU4XHU1MjA2XHJcbiAgICByZXRBcnJheSA9IHJldEFycmF5LmNvbmNhdCh0ZXh0QXJyYXkpO1xyXG4gICAgcmV0QXJyYXkgPSByZXRBcnJheS5zb3J0KChhLCBiKTpudW1iZXI9PmEuYmVnaW4tYi5iZWdpbik7XHJcbiAgICByZXR1cm4gcmV0QXJyYXlcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRMaW5lKGxpbmU6IHN0cmluZywgY3VyQ3Vyc29yOiBFZGl0b3JQb3NpdGlvbiwgc2V0dGluZ3M6IEZvcm1hdFNldHRpbmdzLCBwcmV2Q3Vyc29yPzogRWRpdG9yUG9zaXRpb24pOltzdHJpbmcsIG51bWJlciwgSW5saW5lQ2hhbmdlW11dfG51bGxcclxue1xyXG4gICAgbGV0IGNoID0gY3VyQ3Vyc29yLmNoO1xyXG4gICAgaWYobGluZT09PScnKSByZXR1cm4gWycnLCAwLCBbXV07XHJcblxyXG4gICAgLy8gMS4gXHU1MjEyXHU1MjA2XHU0RTAwXHU4ODRDXHU2NTg3XHU1QjU3XHU3Njg0XHU1MTg1XHU5MEU4XHU0RTBEXHU1NDBDXHU2QTIxXHU1NzU3XHU1MzNBXHU1N0RGXHJcbiAgICBsZXQgbGluZVBhcnRzOklubGluZVBhcnRbXTtcclxuICAgIGlmKHNldHRpbmdzLlVzZXJEZWZpbmVkUmVnU3dpdGNoKVxyXG4gICAge1xyXG4gICAgICAgIGxpbmVQYXJ0cyA9IHNwbGl0TGluZShsaW5lLCBzZXR0aW5ncy5Vc2VyRGVmaW5lZFJlZ0V4cCk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgbGluZVBhcnRzID0gc3BsaXRMaW5lKGxpbmUpO1xyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2cobGluZVBhcnRzKTtcclxuXHJcbiAgICAvLyBcdTU5MDdcdTRFRkRcdTUzOUZcdTY3NjVcdTc2ODRsaW5lUGFydHMsIFx1NkRGMVx1NjJGN1x1OEQxRFxyXG4gICAgbGV0IGxpbmVQYXJ0c09yaWdpbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobGluZVBhcnRzKSk7XHJcbiAgICBsZXQgaW5saW5lQ2hhbmdlTGlzdDpJbmxpbmVDaGFuZ2VbXSA9IFtdO1xyXG4gICAgXHJcbiAgICBsZXQgY3Vyc29yTGluZVBhcnRJbmRleCA9IC0xO1xyXG4gICAgbGV0IGN1cnNvclJlbGF0aXZlSW5kZXggPSAtMTtcclxuICAgIGxldCByZXN1bHRDdXJzb3JDaCA9IDA7ICAgICAvLyBcdThGOTNcdTUxRkFcdTc2ODRcdTUxNDlcdTY4MDdcdTRGNERcdTdGNkVcclxuXHJcbiAgICAvLyAyLiBcdTYyN0VcdTUyMzBcdTUxNDlcdTY4MDdcdTYyNDBcdTU3MjhcdTc2ODRcdTkwRThcdTUyMDZcdUZGMENcdTU5ODJcdTY3OUNcdTY2MkYgSW5saW5lUGFydC50ZXh0XHVGRjBDXHU1MjE5XHU1NzI4XHU1MTQ5XHU2ODA3XHU1OTA0XHU2M0QyXHU1MTY1J1xcMCdcdTY3NjVcdTY4MDdcdThCQjBcdTUxNDlcdTY4MDdcdTRGNERcdTdGNkVcclxuICAgIGZvcihsZXQgaT0wO2k8bGluZVBhcnRzLmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICAgICAgaWYoY2g+bGluZVBhcnRzW2ldLmJlZ2luICYmIGNoPD1saW5lUGFydHNbaV0uZW5kKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY3Vyc29yTGluZVBhcnRJbmRleCA9IGk7XHJcbiAgICAgICAgICAgIGN1cnNvclJlbGF0aXZlSW5kZXggPSBjaC1saW5lUGFydHNbaV0uYmVnaW47XHJcbiAgICAgICAgICAgIGlmKGxpbmVQYXJ0c1tpXS50eXBlPT09SW5saW5lVHlwZS50ZXh0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9IHN0cmluZ0luc2VydEF0KGxpbmVQYXJ0c1tpXS5jb250ZW50LCBjdXJzb3JSZWxhdGl2ZUluZGV4LCAnXFwwJyk7IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVzdWx0TGluZSA9ICcnO1xyXG4gICAgbGV0IG9mZnNldCA9IDA7XHJcbiAgICAvLyBcdTRGRERcdTVCNThcdTUyNERcdTRFMDBcdTkwRThcdTUyMDZcdTc2ODRcdTUzM0FcdTU3NTdcdTdDN0JcdTU3OEJcdUZGMENJbmxpbmVUeXBlLm5vbmUgXHU0RUUzXHU4ODY4XHU0RTAwXHU4ODRDXHU3Njg0XHU1RjAwXHU1OUNCXHJcbiAgICBsZXQgcHJldlBhcnRUeXBlOnN0cmluZyA9IElubGluZVR5cGUubm9uZTtcclxuICAgIGxldCBwcmV2VGV4dEVuZFdpdGhTcGFjZSA9IGZhbHNlO1xyXG5cclxuICAgIC8vIDMuIFx1OTA0RFx1NTM4Nlx1NkJDRlx1NEUyQVx1ODg0Q1x1OTBFOFx1NTIwNlx1RkYwQ1x1OEZEQlx1ODg0Q1x1NjgzQ1x1NUYwRlx1NTMxNlx1NTkwNFx1NzQwNlxyXG4gICAgZm9yKGxldCBpPTA7aTxsaW5lUGFydHMubGVuZ3RoO2krKylcclxuICAgIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhpbmxpbmVMaXN0W2ldKTtcclxuXHJcbiAgICAgICAgLy8gMy4xIFx1NTk4Mlx1Njc5Q1x1ODg0Q1x1NTE4NVx1N0IyQ1x1NEUwMFx1OTBFOFx1NTIwNlx1NEUzQVx1NjU4N1x1NjcyQ1x1RkYwQ1x1NTIxOVx1NTkwNFx1NzQwNlx1NTNFNVx1OTk5Nlx1NUI1N1x1NkJDRFx1NTkyN1x1NTE5OVx1NzY4NFx1OTBFOFx1NTIwNlxyXG4gICAgICAgIGlmKGk9PT0wICYmIGxpbmVQYXJ0c1tpXS50eXBlPT09SW5saW5lVHlwZS50ZXh0ICYmIHNldHRpbmdzLkNhcGl0YWxpemF0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gMy4xLjEgXHU1OTgyXHU2NzlDIHByZXZDdXJzb3IgXHU0RTE0XHU1MTQ5XHU2ODA3XHU0RTBEXHU1NzI4XHU2QjY0XHU5MEU4XHU1MjA2XHVGRjBDXHU1MjE5XHU4REYzXHU4RkM3XHJcbiAgICAgICAgICAgIGlmKHByZXZDdXJzb3IgJiYgY3Vyc29yTGluZVBhcnRJbmRleCE9MCl7fVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCByZWdGaXJzdFNlbnRlbmNlID0gL15cXHMqKFxcLSAoXFxbW3ggXVxcXSApPyk/W2Etel0vZztcclxuICAgICAgICAgICAgICAgIGxldCByZWdIZWFkZXJTZW50ZW5jZSA9IC9eKCMrIHw+KyA/KVthLXpdL2c7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dGNvcHkgPSBsaW5lUGFydHNbMF0uY29udGVudDtcclxuICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IHJlZ0ZpcnN0U2VudGVuY2UuZXhlYyh0ZXh0Y29weSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF0Y2hIZWFkZXIgPSByZWdIZWFkZXJTZW50ZW5jZS5leGVjKHRleHRjb3B5KTtcclxuICAgICAgICAgICAgICAgIGxldCBkc3RDaGFySW5kZXggPSAtMTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihtYXRjaClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkc3RDaGFySW5kZXggPSByZWdGaXJzdFNlbnRlbmNlLmxhc3RJbmRleC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZihtYXRjaEhlYWRlcilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkc3RDaGFySW5kZXggPSByZWdIZWFkZXJTZW50ZW5jZS5sYXN0SW5kZXgtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZighcHJldkN1cnNvcil7fVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZihwcmV2Q3Vyc29yLmxpbmU9PT1jdXJDdXJzb3IubGluZSAmJiBkc3RDaGFySW5kZXg+PXByZXZDdXJzb3IuY2ggJiYgZHN0Q2hhckluZGV4PGN1ckN1cnNvci5jaCl7fVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBkc3RDaGFySW5kZXggPSAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZihkc3RDaGFySW5kZXggIT0gLTEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzWzBdLmNvbnRlbnQgPSB0ZXh0Y29weS5zdWJzdHJpbmcoMCwgZHN0Q2hhckluZGV4KSt0ZXh0Y29weS5jaGFyQXQoZHN0Q2hhckluZGV4KS50b1VwcGVyQ2FzZSgpK3RleHRjb3B5LnN1YnN0cmluZyhkc3RDaGFySW5kZXgrMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyAzLjIgXHU1MjA2XHU1MjJCXHU1OTA0XHU3NDA2XHU2QkNGXHU3OUNEXHU1MzNBXHU1NzU3XHU2MEM1XHU1MUI1XHJcbiAgICAgICAgc3dpdGNoKGxpbmVQYXJ0c1tpXS50eXBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gMy4yLjEgXHU1OTA0XHU3NDA2XHU2NTg3XHU2NzJDXHU1MzNBXHU1NzU3XHJcbiAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS50ZXh0OlxyXG4gICAgICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdCZWZvcmUnLCBpLCBsaW5lUGFydHNbaV0uY29udGVudClcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjQgXHU1OTA0XHU3NDA2XHU1M0U1XHU5OTk2XHU1QjU3XHU2QkNEXHU1OTI3XHU1MTk5XHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5DYXBpdGFsaXphdGlvbilcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR2YXIgcmVnID0gL1tcXC5cXD9cXCFcdTMwMDJcdUZGMDFcdUZGMUZdKFtcXHNdKilbYS16XS9nO1xyXG5cdFx0XHRcdFx0d2hpbGUodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IHJlZy5leGVjKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighbWF0Y2gpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcEluZGV4ID0gcmVnLmxhc3RJbmRleC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjdXJzb3JMaW5lUGFydEluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcmV2Q3Vyc29yLCBjdXJDdXJzb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZW1wSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighcHJldkN1cnNvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZygwLCB0ZW1wSW5kZXgpICsgY29udGVudC5jaGFyQXQodGVtcEluZGV4KS50b1VwcGVyQ2FzZSgpICsgY29udGVudC5zdWJzdHJpbmcocmVnLmxhc3RJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihwcmV2Q3Vyc29yICYmIGN1cnNvckxpbmVQYXJ0SW5kZXg9PT1pICYmIHByZXZDdXJzb3IubGluZT09PWN1ckN1cnNvci5saW5lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0ZW1wSW5kZXg+PXByZXZDdXJzb3IuY2gtb2Zmc2V0ICYmIHRlbXBJbmRleDxjdXJDdXJzb3IuY2gtb2Zmc2V0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gY29udGVudC5zdWJzdHJpbmcoMCwgdGVtcEluZGV4KSArIGNvbnRlbnQuY2hhckF0KHRlbXBJbmRleCkudG9VcHBlckNhc2UoKSArIGNvbnRlbnQuc3Vic3RyaW5nKHJlZy5sYXN0SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjEgXHU1OTA0XHU3NDA2XHU0RTJEXHU4MkYxXHU2NTg3XHU0RTRCXHU5NUY0XHU3QTdBXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5DaGluZXNlRW5nbGlzaFNwYWNlKXtcclxuXHRcdFx0XHRcdGxldCByZWcxPS8oW0EtWmEtejAtOSxcXC47XFw/OiFdKShbXFx1NGUwMC1cXHU5ZmE1XSspL2dpO1xyXG5cdFx0XHRcdFx0bGV0IHJlZzI9LyhbXFx1NGUwMC1cXHU5ZmE1XSspKFtBLVphLXowLTldKS9naTtcclxuXHRcdFx0XHRcdGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gY29udGVudC5yZXBsYWNlKHJlZzEsIFwiJDEgJDJcIikucmVwbGFjZShyZWcyLCBcIiQxICQyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuXHRcdFx0XHR9XHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjIgXHU1OTA0XHU3NDA2XHU0RTJEXHU2NTg3XHU5NUY0XHU2NUUwXHU3QTdBXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5DaGluZXNlTm9TcGFjZSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRsZXQgcmVnPS8oW1xcdTRlMDAtXFx1OWZhNVx1RkYwQ1x1MzAwMlx1MzAwMVx1RkYxQlx1MjAxOFx1MjAxOVx1MzAwQVx1MzAwQl0rKShcXHMrKShbXFx1NGUwMC1cXHU5ZmE1XHVGRjBDXHUzMDAyXHUzMDAxXHVGRjFCXHUyMDE4XHUyMDE5XHUzMDBBXHUzMDBCXSspL2c7XHJcblx0XHRcdFx0XHR3aGlsZShyZWcuZXhlYyhjb250ZW50KSlcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0bGluZVBhcnRzW2ldLmNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnLCBcIiQxJDNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuUHVuY3R1YXRpb25TcGFjZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUZXh0LjMgXHU1OTA0XHU3NDA2XHU4MkYxXHU2NTg3XHU1QjU3XHU2QkNEXHU0RTBFXHU2ODA3XHU3MEI5XHU5NUY0XHU3QTdBXHU2ODNDXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYoc2V0dGluZ3MuRW5nbGlzaFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZyA9IC8oWyxcXC47XFw/XFwhXSkoW0EtWmEtel0pL2dpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2ggPSByZWcuZXhlYyhjb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFtYXRjaCkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcEluZGV4ID0gcmVnLmxhc3RJbmRleC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXByZXZDdXJzb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIHRlbXBJbmRleCkgKyBcIiBcIiArIGNvbnRlbnQuc3Vic3RyaW5nKHRlbXBJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHByZXZDdXJzb3IgJiYgY3Vyc29yTGluZVBhcnRJbmRleD09PWkgJiYgcHJldkN1cnNvci5saW5lPT09Y3VyQ3Vyc29yLmxpbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGVtcEluZGV4Pj1wcmV2Q3Vyc29yLmNoLW9mZnNldCAmJiB0ZW1wSW5kZXg8Y3VyQ3Vyc29yLmNoLW9mZnNldClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZygwLCB0ZW1wSW5kZXgpICsgXCIgXCIgKyBjb250ZW50LnN1YnN0cmluZyh0ZW1wSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1MzU1XHU3MkVDXHU1OTA0XHU3NDA2XHU1MTkyXHU1M0Y3XHU1NDBFXHU2NTg3XHU2NzJDXHU3Njg0XHU4MUVBXHU1MkE4XHU3QTdBXHU2ODNDXHVGRjBDXHU0RTNBXHU0RTg2XHU1MTdDXHU1QkI5IDplbW9qaTogXHU2ODNDXHU1RjBGXHU3Njg0XHU4RjkzXHU1MTY1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWcyID0gLyg6KShbQS1aYS16MC05X10rWyAsXFwuXFw/XFxcXFxcLzsnXCJcdUZGMENcdTMwMDJcdUZGMUZcdUZGMUJcdTIwMThcdTIwMUNcdTIwMURcdTIwMTlcdTMwMDFcXFtcXF1cXC1cXHtcXH1dKS9naTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnMiwgXCIkMSAkMlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobGluZVBhcnRzW2ldLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBUZXh0LjUgXHU1OTA0XHU3NDA2XHU4MkYxXHU2NTg3XHU2MkVDXHU1M0Y3XHU0RTBFXHU1OTE2XHU5MEU4XHU2NTg3XHU2NzJDXHU3QTdBXHU2ODNDXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYoc2V0dGluZ3MuQnJhY2VTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWcxID0gLyhcXCkpKFtBLVphLXowLTlcXHU0ZTAwLVxcdTlmYTVdKykvZ2k7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWcyID0gLyhbQS1aYS16MC05XFx1NGUwMC1cXHU5ZmE1OixcXC5cXD9cXCEnXCJdKykoXFwoKS9naTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnMSwgXCIkMSAkMlwiKS5yZXBsYWNlKHJlZzIsIFwiJDEgJDJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRleHQuNiBcdTU5MDRcdTc0MDZcdTY1NzBcdTVCNTdcdTRFMEVcdTY4MDdcdTcwQjlcdTc2ODRcdTdBN0FcdTY4M0NcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZihzZXR0aW5ncy5OdW1iZXJTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWcxID0gLyhbLDtcXD9cXCFcXF1cXH1dKShbMC05XSkvZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZzIgPSAvKFswLTldKShbXFxbXFx7XSkvZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnMSwgXCIkMSAkMlwiKS5yZXBsYWNlKHJlZzIsIFwiJDEgJDJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjcgXHU1Rjk3XHU1MjMwXHU2NTg3XHU2NzJDXHU5MEU4XHU1MjA2XHU2NjJGXHU1NDI2XHU0RUU1XHU3QTdBXHU3NjdEXHU3QjI2XHU1RjAwXHU1OUNCXHU2MjE2XHU3RUQzXHU2NzVGXHVGRjBDXHU3NTI4XHU2NzY1XHU1MjI0XHU2NUFEXHU1NDBFXHU3RUVEXHU2NTg3XHU2NzJDXHU1MjREXHU1NDBFXHU2NjJGXHU1NDI2XHU5NzAwXHU4OTgxXHU2REZCXHU1MkEwXHU3QTdBXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBsZXQgcmVnU3RhcnRXaXRoU3BhY2UgPSAvXlxcMD9bXFxzLFxcLjtcXD9cXCFcdUZGMENcdTMwMDJcdUZGMUJcdUZGMUZcdUZGMDFcdTMwMDFcdUZGMDhcXF1cXClcXH1dLztcclxuICAgICAgICAgICAgICAgIGxldCByZWdFbmRXaXRoU3BhY2UgPSAvW1xcc1x1RkYwQ1x1MzAwMlx1MzAwMVx1RkYxQVx1RkYxRlx1RkYwMVx1RkYwOVxcW1xcKFxce11cXDA/JC87XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dFN0YXJ0V2l0aFNwYWNlID0gcmVnU3RhcnRXaXRoU3BhY2UudGVzdChjb250ZW50KTtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0RW5kV2l0aFNwYWNlID0gcmVnRW5kV2l0aFNwYWNlLnRlc3QoY29udGVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ01lZGlhbicsIGksIGxpbmVQYXJ0c1tpXS5jb250ZW50KVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRleHQuOCBcdTY4MzlcdTYzNkVcdTUyNERcdTRFMDBcdTkwRThcdTUyMDZcdTc2ODRcdTUzM0FcdTU3NTdcdTdDN0JcdTU3OEJcdTU5MDRcdTc0MDZcdTdBN0FcdTY4M0NcdTZERkJcdTUyQTBcdTc2ODRcdTk1RUVcdTk4OThcclxuICAgICAgICAgICAgICAgIHN3aXRjaChwcmV2UGFydFR5cGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLm5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5jb2RlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgJiYgIXRleHRTdGFydFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSAnICcrY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuZm9ybXVsYTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlICYmICF0ZXh0U3RhcnRXaXRoU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gJyAnK2NvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmxpbms6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmVQYXJ0c1tpXS5jb250ZW50LmNoYXJBdCgwKT09PScgJykgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdCYXJlTGluayA9IC8oaHR0cHM/OlxcL1xcL3xmdHA6XFwvXFwvfG9ic2lkaWFuOlxcL1xcL3x6b3Rlcm86XFwvXFwvfHd3dy4pW15cXHNcdUZGMDhcdUZGMDlcdTMwMEFcdTMwMEJcdTMwMDIsOzpcdUZGMENcdUZGMDFcdUZGMUZcdUZGMUJcdUZGMUFcdTIwMUNcdTIwMURcdTIwMThcdTIwMTlcXClcXChcXFtcXF1cXHtcXH0nXSsvZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzQmFyZUxpbmsgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCYXJlTGluayA9IHJlZ0JhcmVMaW5rLnRlc3QobGluZVBhcnRzW2ktMV0uY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGlzQmFyZUxpbmspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gJyAnK2NvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuTGlua1NtYXJ0U3BhY2UgJiYgIXRleHRTdGFydFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ1Rlc3RXaWtpTGluayA9IC9cXCE/XFxbXFxbW15cXFtcXF1dKj9cXF1cXF0vO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ01kTGluayA9IC9cXCE/XFxbW15cXFtcXF1dKj9cXF1cXChbXlxcc1xcKVxcKFxcW1xcXVxce1xcfSddKlxcKS9nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ05vTmVlZFNwYWNlID0gL1tcXHU0ZTAwLVxcdTlmYTVdW1xcdTRlMDAtXFx1OWZhNV0vZzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHdvTmVpZ2hib3JDaGFycyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXJBdFRleHRCZWdpbiA9IGxpbmVQYXJ0c1tpXS5jb250ZW50LmNoYXJBdCgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGFyQXRMaW5rRW5kOnN0cmluZyA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGlua1dpdGhOb1RleHQgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZWdUZXN0V2lraUxpbmsudGVzdChsaW5lUGFydHNbaS0xXS5jb250ZW50KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyQXRMaW5rRW5kID0gbGluZVBhcnRzW2ktMV0uY29udGVudC5jaGFyQXQobGluZVBhcnRzW2ktMV0uY29udGVudC5sZW5ndGgtMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2hhckF0TGlua0VuZD09PSdbJykgbGlua1dpdGhOb1RleHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihyZWdNZExpbmsudGVzdChsaW5lUGFydHNbaS0xXS5jb250ZW50KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnTWRMaW5rRW5kID0gL1xcXS87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXJBdExpbmtFbmRJbmRleD1saW5lUGFydHNbaS0xXS5jb250ZW50LnNlYXJjaChyZWdNZExpbmtFbmQpLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhckF0TGlua0VuZCA9IGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQuY2hhckF0KGNoYXJBdExpbmtFbmRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2hhckF0TGlua0VuZD09PSdbJykgbGlua1dpdGhOb1RleHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR3b05laWdoYm9yQ2hhcnMgPSBjaGFyQXRMaW5rRW5kK2NoYXJBdFRleHRCZWdpbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhbGlua1dpdGhOb1RleHQgJiYgIXJlZ05vTmVlZFNwYWNlLnRlc3QodHdvTmVpZ2hib3JDaGFycykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSAnICcrY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZighc2V0dGluZ3MuTGlua1NtYXJ0U3BhY2UgJiYgc2V0dGluZ3MuTGlua1NwYWNlICYmICF0ZXh0U3RhcnRXaXRoU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gJyAnK2NvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnVzZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UgJiYgIXRleHRTdGFydFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSAnICcrY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjkgXHU1OTgyXHU2NzlDXHU1MTQ5XHU2ODA3XHU1NzI4XHU4QkU1XHU1MzNBXHU1NzU3XHVGRjBDXHU1MjE5XHU4QkExXHU3Qjk3XHU2NzAwXHU3RUM4XHU1MTQ5XHU2ODA3XHU3Njg0XHU0RjREXHU3RjZFXHJcbiAgICAgICAgICAgICAgICBpZihpID09PSBjdXJzb3JMaW5lUGFydEluZGV4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZWcgPSAnXFwwJztcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IGNvbnRlbnQuc2VhcmNoKHJlZylcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRDdXJzb3JDaCA9IG9mZnNldCArIG47XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1MjIwXHU5NjY0IFxcMFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gc3RyaW5nRGVsZXRlQXQoY29udGVudCwgbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnQWZ0ZXInLCBpLCBsaW5lUGFydHNbaV0uY29udGVudClcclxuICAgICAgICAgICAgICAgIC8vIFRleHQuMTAgXHU1M0Q4XHU5MUNGXHU2NkY0XHU2NUIwXHJcbiAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHByZXZQYXJ0VHlwZSA9IElubGluZVR5cGUudGV4dDtcclxuICAgICAgICAgICAgICAgIHByZXZUZXh0RW5kV2l0aFNwYWNlID0gdGV4dEVuZFdpdGhTcGFjZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gMy4yLjIgXHU1OTA0XHU3NDA2XHU4ODRDXHU1MTg1XHU0RUUzXHU3ODAxXHU1NzU3XHU5MEU4XHU1MjA2XHJcbiAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5jb2RlOlxyXG4gICAgICAgICAgICAgICAgLy8gQ29kZS4xIFx1NjgzOVx1NjM2RVx1NTI0RFx1NEUwMFx1NTMzQVx1NTc1N1x1N0M3Qlx1NTc4Qlx1NTQ4Q3NldHRpbmdzXHU2REZCXHU1MkEwXHU3QTdBXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2gocHJldlBhcnRUeXBlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5ub25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudGV4dDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lQ29kZVNwYWNlICYmICFwcmV2VGV4dEVuZFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ktMV0uY29udGVudCArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5jb2RlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmZvcm11bGE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSB8fCBzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmxpbms6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkxpbmtTcGFjZSB8fCBzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnVzZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UgfHwgc2V0dGluZ3MuSW5saW5lQ29kZVNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIENvZGUuMiBcdTU5ODJcdTY3OUNcdTUxNDlcdTY4MDdcdTU3MjhcdThCRTVcdTUzM0FcdTU3NTdcdUZGMENcdTUyMTlcdThCQTFcdTdCOTdcdTY3MDBcdTdFQzhcdTUxNDlcdTY4MDdcdTc2ODRcdTRGNERcdTdGNkVcclxuICAgICAgICAgICAgICAgIGlmKGkgPT09IGN1cnNvckxpbmVQYXJ0SW5kZXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q3Vyc29yQ2ggPSBvZmZzZXQgKyBjdXJzb3JSZWxhdGl2ZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gQ29kZS4zIFx1NTNEOFx1OTFDRlx1NjZGNFx1NjVCMFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSBsaW5lUGFydHNbaV0uY29udGVudC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBwcmV2UGFydFR5cGUgPSBJbmxpbmVUeXBlLmNvZGU7XHJcbiAgICAgICAgICAgICAgICBwcmV2VGV4dEVuZFdpdGhTcGFjZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAvLyAzLjIuMyBcdTU5MDRcdTc0MDZcdTg4NENcdTUxODVcdTUxNkNcdTVGMEZcdTc2ODRcdTkwRThcdTUyMDZcclxuICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmZvcm11bGE6XHJcbiAgICAgICAgICAgICAgICAvLyBGb3JtdWxhLjEgXHU2ODM5XHU2MzZFXHU1MjREXHU0RTAwXHU1MzNBXHU1NzU3XHU3QzdCXHU1NzhCXHU1NDhDc2V0dGluZ3NcdTZERkJcdTUyQTBcdTdBN0FcdTY4M0NcclxuICAgICAgICAgICAgICAgIHN3aXRjaChwcmV2UGFydFR5cGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLm5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS50ZXh0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UgJiYgIXByZXZUZXh0RW5kV2l0aFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaS0xXS5jb250ZW50ICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmNvZGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUNvZGVTcGFjZSB8fCBzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmZvcm11bGE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUubGluazpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuTGlua1NwYWNlIHx8IHNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudXNlcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuVXNlclBhcnRTcGFjZSB8fCBzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBGb3JtdWxhLjIgXHU1OTgyXHU2NzlDXHU1MTQ5XHU2ODA3XHU1NzI4XHU4QkU1XHU1MzNBXHU1NzU3XHVGRjBDXHU1MjE5XHU4QkExXHU3Qjk3XHU2NzAwXHU3RUM4XHU1MTQ5XHU2ODA3XHU3Njg0XHU0RjREXHU3RjZFXHJcbiAgICAgICAgICAgICAgICBpZihpID09PSBjdXJzb3JMaW5lUGFydEluZGV4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdEN1cnNvckNoID0gb2Zmc2V0ICsgY3Vyc29yUmVsYXRpdmVJbmRleDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEZvcm11bGEuMyBcdTUzRDhcdTkxQ0ZcdTY2RjRcdTY1QjBcclxuICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gbGluZVBhcnRzW2ldLmNvbnRlbnQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgcHJldlBhcnRUeXBlID0gSW5saW5lVHlwZS5mb3JtdWxhO1xyXG4gICAgICAgICAgICAgICAgcHJldlRleHRFbmRXaXRoU3BhY2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgLy8gMy4yLjQgXHU1OTA0XHU3NDA2XHU4ODRDXHU1MTg1XHU5NEZFXHU2M0E1XHU3Njg0XHU5MEU4XHU1MjA2XHJcbiAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5saW5rOlxyXG4gICAgICAgICAgICAgICAgLy8gTGluay4xIFx1NjgzOVx1NjM2RVx1NTI0RFx1NEUwMFx1NTMzQVx1NTc1N1x1N0M3Qlx1NTc4Qlx1NTQ4Q3NldHRpbmdzXHU2REZCXHU1MkEwXHU3QTdBXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2gocHJldlBhcnRUeXBlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5ub25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudGV4dDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXJBdFRleHRFbmQgPSBsaW5lUGFydHNbaS0xXS5jb250ZW50LmNoYXJBdChsaW5lUGFydHNbaS0xXS5jb250ZW50Lmxlbmd0aC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2hhckF0VGV4dEVuZD09PScgJykgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5MaW5rU21hcnRTcGFjZSAmJiAhcHJldlRleHRFbmRXaXRoU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdUZXN0V2lraUxpbmsgPSAvXFwhP1xcW1xcW1teXFxbXFxdXSo/XFxdXFxdLztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdNZExpbmsgPSAvXFwhP1xcW1teXFxbXFxdXSo/XFxdXFwoW15cXHNcXClcXChcXFtcXF1cXHtcXH0nXSpcXCkvZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdOb05lZWRTcGFjZSA9IC9bXFx1NGUwMC1cXHU5ZmE1XVtcXHU0ZTAwLVxcdTlmYTVdL2c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNCYXJlTGluayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHR3b05laWdoYm9yQ2hhcnMgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGFyQXRMaW5rQmVnaW4gPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaW5rV2l0aE5vVGV4dCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVnVGVzdFdpa2lMaW5rLnRlc3QobGluZVBhcnRzW2ldLmNvbnRlbnQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiZWdpbkluZGV4ID0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihsaW5lUGFydHNbaV0uY29udGVudC5jaGFyQXQoMCk9PT0nIScpIGJlZ2luSW5kZXg9MztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyQXRMaW5rQmVnaW4gPSBsaW5lUGFydHNbaV0uY29udGVudC5jaGFyQXQoYmVnaW5JbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2hhckF0TGlua0JlZ2luPT09J10nKSBsaW5rV2l0aE5vVGV4dCA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocmVnTWRMaW5rLnRlc3QobGluZVBhcnRzW2ldLmNvbnRlbnQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdNZExpbmtCZWdpbiA9IC9cXFsvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGFyQXRMaW5rQmVnaW5JbmRleCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50LnNlYXJjaChyZWdNZExpbmtCZWdpbikrMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyQXRMaW5rQmVnaW4gPSBsaW5lUGFydHNbaV0uY29udGVudC5jaGFyQXQoY2hhckF0TGlua0JlZ2luSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNoYXJBdExpbmtCZWdpbj09PSddJykgbGlua1dpdGhOb1RleHQgPSB0cnVlOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0JhcmVMaW5rID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0d29OZWlnaGJvckNoYXJzID0gY2hhckF0VGV4dEVuZCtjaGFyQXRMaW5rQmVnaW47ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICFsaW5rV2l0aE5vVGV4dCAmJiAoaXNCYXJlTGluayB8fCAhcmVnTm9OZWVkU3BhY2UudGVzdCh0d29OZWlnaGJvckNoYXJzKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ktMV0uY29udGVudCArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihzZXR0aW5ncy5MaW5rU3BhY2UgJiYgIXByZXZUZXh0RW5kV2l0aFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaS0xXS5jb250ZW50ICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmNvZGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUNvZGVTcGFjZSB8fCBzZXR0aW5ncy5MaW5rU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmZvcm11bGE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSB8fCBzZXR0aW5ncy5MaW5rU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmxpbms6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkxpbmtTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudXNlcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuVXNlclBhcnRTcGFjZSB8fCBzZXR0aW5ncy5MaW5rU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTGluay4yIFx1NTk4Mlx1Njc5Q1x1OEJFNVx1NTMzQVx1NTc1N1x1NjcwOVx1NTE0OVx1NjgwN1x1RkYwQ1x1NTIxOVx1OEJBMVx1N0I5N1x1NjcwMFx1N0VDOFx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVxyXG4gICAgICAgICAgICAgICAgaWYoaSA9PT0gY3Vyc29yTGluZVBhcnRJbmRleClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRDdXJzb3JDaCA9IG9mZnNldCArIGN1cnNvclJlbGF0aXZlSW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBMaW5rLjMgXHU2NkY0XHU2NUIwXHU1M0Q4XHU5MUNGXHJcbiAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHByZXZQYXJ0VHlwZSA9IElubGluZVR5cGUubGluaztcclxuICAgICAgICAgICAgICAgIHByZXZUZXh0RW5kV2l0aFNwYWNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDMuMi41IFx1NTkwNFx1NzQwNlx1NzUyOFx1NjIzN1x1ODFFQVx1NUI5QVx1NEU0OVx1NTMzQVx1NTc1N1x1NzY4NFx1OTBFOFx1NTIwNlxyXG4gICAgICAgICAgICBjYXNlIElubGluZVR5cGUudXNlcjpcclxuICAgICAgICAgICAgICAgIC8vIFVzZXIuMSBcdTY4MzlcdTYzNkVcdTUyNERcdTRFMDBcdTUzM0FcdTU3NTdcdTdDN0JcdTU3OEJcdTU0OENzZXR0aW5nc1x1NkRGQlx1NTJBMFx1N0E3QVx1NjgzQ1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoKHByZXZQYXJ0VHlwZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUubm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnRleHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UgJiYgIXByZXZUZXh0RW5kV2l0aFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaS0xXS5jb250ZW50ICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmNvZGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUNvZGVTcGFjZSB8fCBzZXR0aW5ncy5Vc2VyUGFydFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5mb3JtdWxhOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UgfHwgc2V0dGluZ3MuVXNlclBhcnRTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUubGluazpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuTGlua1NwYWNlIHx8IHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnVzZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBVc2VyLjIgXHU1OTgyXHU2NzlDXHU4QkU1XHU1MzNBXHU1NzU3XHU2NzA5XHU1MTQ5XHU2ODA3XHVGRjBDXHU1MjE5XHU4QkExXHU3Qjk3XHU2NzAwXHU3RUM4XHU1MTQ5XHU2ODA3XHU0RjREXHU3RjZFXHJcbiAgICAgICAgICAgICAgICBpZihpID09PSBjdXJzb3JMaW5lUGFydEluZGV4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdEN1cnNvckNoID0gb2Zmc2V0ICsgY3Vyc29yUmVsYXRpdmVJbmRleDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIExpbmsuMyBcdTY2RjRcdTY1QjBcdTUzRDhcdTkxQ0ZcclxuICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gbGluZVBhcnRzW2ldLmNvbnRlbnQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgcHJldlBhcnRUeXBlID0gSW5saW5lVHlwZS51c2VyO1xyXG4gICAgICAgICAgICAgICAgcHJldlRleHRFbmRXaXRoU3BhY2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmb3IobGV0IGk9MDtpPGxpbmVQYXJ0cy5sZW5ndGg7aSsrKVxyXG4gICAge1xyXG4gICAgICAgIGlmKGxpbmVQYXJ0c1tpXS50eXBlID09PSBJbmxpbmVUeXBlLnRleHQgJiYgbGluZVBhcnRzW2ldLmNvbnRlbnQhPWxpbmVQYXJ0c09yaWdpbltpXS5jb250ZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGxpbmVQYXJ0c1tpXS5jb250ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNPcmlnaW5baV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNPcmlnaW5baV0uZW5kLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbjogbGluZVBhcnRzT3JpZ2luW2ldLmNvbnRlbnRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbmxpbmVDaGFuZ2VMaXN0ID0gaW5saW5lQ2hhbmdlTGlzdC5zb3J0KChhLCBiKTpudW1iZXI9PmEuYmVnaW4tYi5iZWdpbik7XHJcbiAgICByZXR1cm4gW3Jlc3VsdExpbmUsIHJlc3VsdEN1cnNvckNoLCBpbmxpbmVDaGFuZ2VMaXN0XTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzUG9zaXRpb25CZWZvcmUocG9zMTogRWRpdG9yUG9zaXRpb24sIHBvczI6IEVkaXRvclBvc2l0aW9uKTogYm9vbGVhblxyXG57XHJcbiAgICBpZihwb3MxLmxpbmUgPCBwb3MyLmxpbmUpIHJldHVybiB0cnVlO1xyXG4gICAgZWxzZSBpZiAocG9zMS5saW5lID4gcG9zMi5saW5lKSByZXR1cm4gZmFsc2U7XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgaWYocG9zMS5jaCA8IHBvczIuY2gpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQSx1QkFBc0g7OztBQ0F0SCxzQkFBdUM7QUFFaEMsSUFBSztBQUFMLFVBQUssYUFBTDtBQUFpQix3QkFBSztBQUFRLHdCQUFLO0FBQVEsMkJBQVE7QUFBVyx3QkFBSztBQUFRLHdCQUFLO0FBQWdCLHdCQUFLO0FBQUEsR0FBaEc7QUFDTCxJQUFLO0FBQUwsVUFBSyxXQUFMO0FBQWUsc0JBQUs7QUFBUSxzQkFBSztBQUFRLHlCQUFRO0FBQVcsNkJBQVk7QUFBZSxzQkFBSztBQUFBLEdBQXZGO0FBbURMLElBQU0sbUJBQW1DO0FBQUEsRUFDNUMsZ0JBQWdCO0FBQUEsRUFDbkIscUJB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
